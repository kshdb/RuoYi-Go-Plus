var I=(e,d,n)=>new Promise((m,a)=>{var p=t=>{try{r(n.next(t))}catch(l){a(l)}},s=t=>{try{r(n.throw(t))}catch(l){a(l)}},r=t=>t.done?m(t.value):Promise.resolve(t.value).then(p,s);r((n=n.apply(e,d)).next())});import{a as P,B as b}from"./index-BIkrAlj7.js";import{u as S,_ as E}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{aA as u}from"./entry/index-BbJQUQ84-1718268303552.js";import{u as M}from"./useRender-D1Q3fAQ3.js";import{g as T}from"./dict-vVDMuEaq.js";import{D as c}from"./dictEnum-DeC8h6ZR.js";import{d as N,c as R,f as x,Z as B,a8 as O,a9 as v,k as A,u as i,ac as D}from"./vue-Cw15aJ-2.js";function J(e){return u.get({url:"/system/notice/list",params:e})}function V(e){return u.get({url:"/system/notice/"+e})}function k(e){return u.postWithMsg({url:"/system/notice",data:e})}function q(e){return u.putWithMsg({url:"/system/notice",data:e})}function K(e){return u.deleteWithMsg({url:"/system/notice/"+e})}const{renderDict:g}=M(),Q=[{title:"公告标题",dataIndex:"noticeTitle"},{title:"公告类型",dataIndex:"noticeType",width:120,customRender:({value:e})=>g(e,c.NOTICE_TYPE)},{title:"状态",dataIndex:"status",width:120,customRender:({value:e})=>g(e,c.NOTICE_STATUS)},{title:"创建人",dataIndex:"createByName",width:150},{title:"创建时间",dataIndex:"createTime"}],X=[{field:"noticeTitle",label:"公告标题",component:"Input"},{field:"createBy",label:"创建人",component:"Input"},{field:"noticeType",label:"公告类型",component:"Select",componentProps:{options:T(c.NOTICE_TYPE)}}],F=[{label:"公告ID",field:"noticeId",component:"Input",show:!1},{label:"公告标题",field:"noticeTitle",component:"Input",required:!0,colProps:{span:24}},{label:"公告状态",field:"status",component:"Select",defaultValue:"0",required:!0,componentProps:{allowClear:!1,options:T(c.NOTICE_STATUS)},colProps:{span:11}},{label:"公告类型",field:"noticeType",defaultValue:"1",component:"Select",required:!0,componentProps:{allowClear:!1,options:T(c.NOTICE_TYPE)},colProps:{span:11,offset:2}},{field:"noticeContent",label:"公告内容",component:"RichTextarea",required:!0,defaultValue:"",colProps:{span:24}}],ee=N({name:"NoticeModal",__name:"NoticeModal",emits:["register","reload"],setup(e,{emit:d}){const n=d,m=R(()=>a.value?"编辑公告":"新增公告"),a=x(!1),[p,{modalLoading:s,closeModal:r}]=P(o=>I(this,null,function*(){s(!0);const{record:f,update:_}=o;if(a.value=_,_&&f){const C=yield V(f.noticeId);yield l(C)}s(!1)})),[t,{setFieldsValue:l,validate:w,resetForm:h}]=S({layout:"vertical",labelWidth:80,name:"notice_modal",showActionButtonGroup:!1,schemas:F});function y(){return I(this,null,function*(){try{s(!0);const o=yield w();i(a)?yield q(o):yield k(o),n("reload"),r(),yield h()}catch(o){}finally{s(!1)}})}return(o,f)=>(B(),O(i(b),D(o.$attrs,{title:m.value,width:700,"can-fullscreen":!0,onRegister:i(p),onOk:y,onCancel:i(h)}),{default:v(()=>[A(i(E),{onRegister:i(t)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{ee as _,K as a,Q as c,X as f,J as n};
