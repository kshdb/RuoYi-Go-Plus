import{a as x,B as b}from"./index-BIkrAlj7.js";import{ab as B,e as C,h as M}from"./entry/index-BbJQUQ84-1718268303552.js";import{aE as k,bb as w}from"./antd-DMGzOvrA.js";import{d as y,f as D,Z as I,a8 as U,a9 as r,k as l,u as s,$ as t,ac as z}from"./vue-Cw15aJ-2.js";const $={class:"ant-upload-drag-icon"},v=t("p",{class:"ant-upload-text"},"点击或者拖拽上传附件",-1),F=t("p",{class:"ant-upload-hint"}," 仅支持 .zip、.bpmn20.xml、bpmn 格式文件 ",-1),N=".zip,.bpmn20.xml,.bpmn",T=y({name:"DeployModal",__name:"DeployModal",emits:["register","reload"],setup(O,{emit:c}){const i=k.Dragger,d=c,o=D(""),[p,{closeModal:m}]=x(e=>{o.value=e}),{apiUrl:u,clientId:f}=B(),g=`${u}/workflow/processDefinition/deployByFile`,h={Authorization:"Bearer "+C(),clientId:f},{createMessage:n}=M();function _(e){const a=e.file;(a==null?void 0:a.status)==="done"&&(a.xhr.status===200?(n.success("部署成功"),d("reload"),m()):n.error("服务器错误"))}return(e,a)=>(I(),U(s(b),z(e.$attrs,{title:"部署流程文件",width:600,"can-fullscreen":!1,showCancelBtn:!1,showOkBtn:!1,onRegister:s(p)}),{default:r(()=>[l(s(i),{name:"file",multiple:!1,maxCount:1,data:{categoryCode:o.value},action:g,headers:h,accept:N,onChange:_},{default:r(()=>[t("p",$,[l(s(w))]),v,F]),_:1},8,["data"])]),_:1},16,["onRegister"]))}});export{T as _};
