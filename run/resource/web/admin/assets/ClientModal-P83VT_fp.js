var u=(f,c,a)=>new Promise((i,l)=>{var p=t=>{try{r(a.next(t))}catch(s){l(s)}},m=t=>{try{r(a.throw(t))}catch(s){l(s)}},r=t=>t.done?i(t.value):Promise.resolve(t.value).then(p,m);r((a=a.apply(f,c)).next())});import{a as C,B as b}from"./index-BIkrAlj7.js";import{u as M,_ as v}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{c as B,m as k,a as F,b as I}from"./client.data-BQcrvcFU.js";import{d as P,f as R,c as S,Z as x,a8 as A,a9 as L,k as T,u as o,ac as U}from"./vue-Cw15aJ-2.js";import"./entry/index-BbJQUQ84-1718268303552.js";import"./antd-DMGzOvrA.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./helper-CXVLNTBN.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./index-DCvxWw7W.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./copyTextToClipboard-uEEWQikS.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./style-CLEvKZSv.js";import"./dictEnum-DeC8h6ZR.js";import"./dict-vVDMuEaq.js";import"./useRender-D1Q3fAQ3.js";import"./index-Dx0uas1b.js";const st=P({name:"ClientModal",__name:"ClientModal",emits:["register","reload"],setup(f,{emit:c}){const a=c,i=R(!1),l=S(()=>i.value?"编辑客户端管理":"新增客户端管理"),[p,{modalLoading:m,closeModal:r}]=C(e=>u(this,null,function*(){const{record:d,update:n}=e;if(i.value=n,h([{field:"clientId",show:n},{field:"clientKey",componentProps:{disabled:n}},{field:"clientSecret",componentProps:{disabled:n}}]),n&&d){const y=yield B(d.id);yield s(y)}})),[t,{setFieldsValue:s,resetForm:_,validate:g,updateSchema:h}]=M({layout:"vertical",labelWidth:180,name:"client_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:k});function w(){return u(this,null,function*(){try{m(!0);const e=yield g();e.grantType=e.grantTypeList.join(","),o(i)?yield F(e):yield I(e),yield _(),a("reload",r)}catch(e){}finally{m(!1)}})}return(e,d)=>(x(),A(o(b),U(e.$attrs,{title:l.value,width:600,onRegister:o(p),onOk:w,onCancel:o(_)}),{default:L(()=>[T(o(v),{onRegister:o(t)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{st as default};
