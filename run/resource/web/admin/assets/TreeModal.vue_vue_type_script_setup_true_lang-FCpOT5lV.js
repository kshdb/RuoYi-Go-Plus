var m=(e,p,r)=>new Promise((i,c)=>{var f=t=>{try{d(r.next(t))}catch(l){c(l)}},n=t=>{try{d(r.throw(t))}catch(l){c(l)}},d=t=>t.done?i(t.value):Promise.resolve(t.value).then(f,n);d((r=r.apply(e,p)).next())});import{a as x,B as v}from"./index-BIkrAlj7.js";import{u as N,_ as S}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{aA as u,bw as T}from"./entry/index-BbJQUQ84-1718268303552.js";import{d as q,f as y,c as B,Z as C,a8 as R,a9 as k,k as A,u as o,ac as F}from"./vue-Cw15aJ-2.js";function L(e){return u.get({url:"/demo/tree/list",params:e})}function W(e){return u.get({url:"/demo/tree/"+e})}function D(e){return u.postWithMsg({url:"/demo/tree",data:e})}function P(e){return u.putWithMsg({url:"/demo/tree",data:e})}function j(e){return u.deleteWithMsg({url:"/demo/tree/"+e})}const z=[{label:"父id",field:"parentId",component:"Input"},{label:"部门id",field:"deptId",component:"Input"},{label:"用户id",field:"userId",component:"Input"},{label:"值",field:"treeName",component:"Input"}],J=[{title:"主键",dataIndex:"id"},{title:"父id",dataIndex:"parentId"},{title:"部门id",dataIndex:"deptId"},{title:"用户id",dataIndex:"userId"},{title:"值",dataIndex:"treeName"}],U=[{label:"主键",field:"id",required:!0,component:"Input",show:!1},{label:"父id",field:"parentId",required:!0,component:"TreeSelect"},{label:"部门id",field:"deptId",required:!0,component:"Input"},{label:"用户id",field:"userId",required:!0,component:"Input"},{label:"值",field:"treeName",required:!0,component:"Input"}],K=q({name:"TreeModal",__name:"TreeModal",emits:["register","reload"],setup(e,{emit:p}){const r=p,i=y(!1),c=B(()=>i.value?"编辑测试树":"新增测试树"),[f,{modalLoading:n,closeModal:d}]=x(a=>m(this,null,function*(){n(!0);const{record:s,update:h}=a;if(i.value=h,h&&s){const M=yield W(s.id);yield b(M)}yield t(),n(!1)}));function t(){return m(this,null,function*(){const a=yield L(),s=T(a,{id:"id",pid:"parentId"});yield w({field:"parentId",componentProps:{treeData:s,treeLine:{showLeafIcon:!1},fieldNames:{label:"treeName",value:"treeId"},treeDefaultExpandAll:!0}})})}const[l,{setFieldsValue:b,resetForm:I,validate:g,updateSchema:w}]=N({labelWidth:100,showActionButtonGroup:!1,baseColProps:{span:24},schemas:U});function _(){return m(this,null,function*(){try{n(!0);const a=yield g();o(i)?yield P(a):yield D(a),r("reload"),d(),yield I()}catch(a){}finally{n(!1)}})}return(a,s)=>(C(),R(o(v),F(a.$attrs,{title:c.value,onRegister:o(f),onOk:_,onCancel:o(I)}),{default:k(()=>[A(o(S),{onRegister:o(l)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{K as _,j as a,J as c,z as f,L as t};
