var k=(h,u,o)=>new Promise((d,s)=>{var f=t=>{try{a(o.next(t))}catch(n){s(n)}},m=t=>{try{a(o.throw(t))}catch(n){s(n)}},a=t=>t.done?d(t.value):Promise.resolve(t.value).then(f,m);a((o=o.apply(h,u)).next())});import{P as T}from"./index-DrfqwNLV.js";import{u as $,_ as D}from"./useTable-BlleqRm-.js";import{_ as N}from"./index-Rv_3g2e8.js";import{n as V,f as B,c as S,a as w,_ as W}from"./NoticeModal.vue_vue_type_script_setup_true_lang-DfgTAZ1e.js";import{u as R}from"./index-CMSTH4sS.js";import{_ as L}from"./NoticePreviewModal.vue_vue_type_script_setup_true_lang-CQ-il6iE.js";import{I as _}from"./entry/index-CMepwc5X-1716790511191.js";import{d as A,aa as F,n as G,_ as p,a8 as c,a9 as r,k as y,u as e,m as x,G as E,ac as K}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./antd-BRjMhd0C.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./useRender-C6p2srTi.js";import"./index-BhefpKLc.js";import"./dict-C9gNHjAh.js";import"./dictEnum-DeC8h6ZR.js";const he=A({name:"Notice",__name:"index",setup(h){const[u,{reload:o,multipleRemove:d,selected:s}]=$({rowSelection:{type:"checkbox"},title:"通知公告列表",showIndexColumn:!0,api:V,rowKey:"noticeId",useSearchForm:!0,formConfig:{schemas:B,labelWidth:80,name:"notice",baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:S,actionColumn:{width:230,title:"操作",key:"action",fixed:"right"}}),[f,{openModal:m}]=R(),[a,{openModal:t}]=R();function n(i){m(!0,{record:i,update:!0})}function P(i){t(!0,i)}function I(){m(!0,{update:!1})}function M(i){return k(this,null,function*(){yield w([i.noticeId]),yield o()})}return(i,g)=>{const b=F("a-button"),C=G("auth");return p(),c(e(T),{dense:""},{default:r(()=>[y(e(D),{onRegister:e(u)},{toolbar:r(()=>[x((p(),c(b,{type:"primary",danger:"",onClick:g[0]||(g[0]=v=>e(d)(e(w))),disabled:!e(s)},{default:r(()=>[E("删除")]),_:1},8,["disabled"])),[[C,"system:notice:remove"]]),x((p(),c(b,{type:"primary",onClick:I},{default:r(()=>[E("新增")]),_:1})),[[C,"system:notice:add"]])]),bodyCell:r(({column:v,record:l})=>[v.key==="action"?(p(),c(e(N),{key:0,stopButtonPropagation:"",actions:[{label:"预览",icon:e(_).PREVIEW,type:"primary",ghost:!0,auth:"system:notice:list",onClick:P.bind(null,l)},{label:"修改",icon:e(_).EDIT,type:"primary",ghost:!0,auth:"system:notice:edit",onClick:n.bind(null,l)},{label:"删除",icon:e(_).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:notice:remove",popConfirm:{placement:"left",title:`是否删除公告[${l.noticeTitle}]?`,confirm:M.bind(null,l)}}]},null,8,["actions"])):K("",!0)]),_:1},8,["onRegister"]),y(W,{onRegister:e(f),onReload:e(o)},null,8,["onRegister","onReload"]),y(L,{onRegister:e(a)},null,8,["onRegister"])]),_:1})}}});export{he as default};
