var i=(l,n,r)=>new Promise((m,a)=>{var f=e=>{try{s(r.next(e))}catch(c){a(c)}},t=e=>{try{s(r.throw(e))}catch(c){a(c)}},s=e=>e.done?m(e.value):Promise.resolve(e.value).then(f,t);s((r=r.apply(l,n)).next())});import{P as _}from"./index-C4nZBquz.js";import{u as w,_ as g}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{a as P,h as d,l as h}from"./entry/index-BbJQUQ84-1718268303552.js";import{c as x}from"./index-D5-lyr0E.js";import{d as b,Z as y,a8 as S,a9 as p,k as u,u as o}from"./vue-Cw15aJ-2.js";import{as as C,ar as k}from"./antd-DMGzOvrA.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./helper-CXVLNTBN.js";import"./index-BIkrAlj7.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./index-DCvxWw7W.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./copyTextToClipboard-uEEWQikS.js";import"./style-CLEvKZSv.js";const M=b({__name:"SecureSetting",setup(l){const n=P(),{createSuccessModal:r}=d(),[m,{validate:a}]=w({labelWidth:100,rulesMessageJoinLabel:!0,actionColOptions:{span:24},submitButtonOptions:{text:"确认修改密码"},baseColProps:{span:24},schemas:[{field:"oldPassword",label:"旧密码",component:"InputPassword",rules:[{required:!0,message:"请输入旧密码, 长度在 5 到 20 个字符",min:5,max:20}]},{field:"newPassword",label:"新密码",component:"StrengthMeter",componentProps:{placeholder:"请输入新密码, 长度在 5 到 20 个字符"},rules:[{required:!0,message:"请输入新密码, 长度在 5 到 20 个字符",min:5,max:20}]},{field:"confirmPassword",label:"确认密码",component:"InputPassword",dynamicRules:({values:t})=>[{required:!0,validator:(s,e)=>e?e!==t.newPassword?Promise.reject("两次输入的密码不一致!"):Promise.resolve():Promise.reject("密码不能为空")}]}],submitFunc(){return i(this,null,function*(){try{const t=yield a();d().createConfirm({iconType:"warning",title:"提示",content:"是否确认修改密码?",onOk:()=>i(this,null,function*(){try{yield x(t),r({title:"提示",content:"密码修改成功, 请重新登录!"}),setTimeout(()=>i(this,null,function*(){yield n.logout(!0)}),1500)}catch(s){}})})}catch(t){}})}});return(t,s)=>(y(),S(o(_),null,{default:p(()=>[u(o(k),{clsss:"flex justify-center"},{default:p(()=>[u(o(C),{xs:24,sm:24,md:24,lg:8},{default:p(()=>[u(o(g),{onRegister:o(m),class:"mr-10"},null,8,["onRegister"])]),_:1})]),_:1})]),_:1}))}}),H=h(M,[["__scopeId","data-v-565777a2"]]);export{H as default};
