var f=(_,d,o)=>new Promise((r,i)=>{var c=e=>{try{t(o.next(e))}catch(s){i(s)}},u=e=>{try{t(o.throw(e))}catch(s){i(s)}},t=e=>e.done?r(e.value):Promise.resolve(e.value).then(c,u);t((o=o.apply(_,d)).next())});import{a as y,B as w}from"./index-BIkrAlj7.js";import{u as B,_ as R}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{d as k}from"./index-m3nShAF-.js";import{d as x,f as h,a7 as M,Z as P,a8 as I,a9 as l,k as m,G as C,u as n,ac as F}from"./vue-Cw15aJ-2.js";import{P as A}from"./antd-DMGzOvrA.js";const O=x({name:"CancelModal",__name:"CancelModal",emits:["register","reload"],setup(_,{emit:d}){const o=d,r=h(""),[i,{modalLoading:c,closeModal:u}]=y(a=>{r.value=a}),t=h(!0),[e,{validate:s,resetForm:v}]=B({name:"cancel-form",layout:"vertical",labelWidth:120,schemas:[{label:"作废原因",field:"deleteReason",component:"InputTextArea",componentProps(){return{placeholder:"请输入作废原因",rows:5,onChange(a){t.value=!a.target.value}}},rules:[{required:!0,message:"请输入作废原因",trigger:["change","blur"]}]}],showActionButtonGroup:!1,baseColProps:{span:24}});function g(){return f(this,null,function*(){try{c(!0);const a=yield s();a.businessKey=n(r),yield k(a),o("reload"),u(),yield p()}catch(a){}finally{c(!1)}})}function p(){return f(this,null,function*(){yield v(),r.value="",t.value=!0,u()})}return(a,G)=>{const b=M("a-button");return P(),I(n(w),F(a.$attrs,{title:"作废",width:600,onRegister:n(i),onOk:g,onCancel:p}),{footer:l(()=>[m(b,{onClick:p},{default:l(()=>[C("取消")]),_:1}),m(n(A),{title:"是否确认作废?","ok-text":"确认","cancel-text":"再想想",onConfirm:g},{default:l(()=>[m(b,{disabled:t.value,type:"primary"},{default:l(()=>[C("确认")]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[m(n(R),{onRegister:n(e)},null,8,["onRegister"])]),_:1},16,["onRegister"])}}});export{O as _};
