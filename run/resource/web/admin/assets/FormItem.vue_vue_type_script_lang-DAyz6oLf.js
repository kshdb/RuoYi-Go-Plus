var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var H=(e,u,b)=>u in e?Z(e,u,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[u]=b,f=(e,u)=>{for(var b in u||(u={}))oe.call(u,b)&&H(e,b,u[b]);if(W)for(var b of W(u))se.call(u,b)&&H(e,b,u[b]);return e},J=(e,u)=>ee(e,te(u));import{c as F,u as o,d as ne,I as le,m as ae,k as g,i as re,ad as $,A as ce,G as ie}from"./vue-Bw3NQgLF.js";import{d as z}from"./componentMap-DPcekmXH.js";import{k as de,b1 as E,aL as fe,bi as ue}from"./entry/index-CMepwc5X-1716790511191.js";import{i as me,N as K,c as G,s as he}from"./helper-CfJJkrf5.js";import{Q as be,e as P,ag as D,au as Q,as as pe,ab as U,f as ge,r as ye,b1 as Ce}from"./antd-BRjMhd0C.js";function Pe(e){return"slot"in e}function xe(e){return!Pe(e)}function we(e,u){return F(()=>{const b=o(e),{labelCol:k={},wrapperCol:O={}}=b.itemProps||{},{labelWidth:q,disabledLabelWidth:p}=b,{labelWidth:y,labelCol:S,wrapperCol:j,layout:N}=o(u);if(!y&&!q&&!S||p)return k.style={textAlign:"left"},{labelCol:k,wrapperCol:O};let x=q||y;const V=f(f({},S),k),v=f(f({},j),O);return x&&(x=be(x)?`${x}px`:x),{labelCol:f({style:{width:x}},V),wrapperCol:f({style:{width:N==="vertical"?"100%":`calc(100% - ${x})`}},v)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!re(e)}const Me=ne({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:u}){const{t:b}=de(),{schema:k,formProps:O}=le(e),q=we(k,O),p=F(()=>{const{allDefaultValues:s,formModel:t,schema:r}=e,{mergeDynamicData:l}=e.formProps;return{field:r.field,model:t,values:f(f(f({},l),s),t),schema:r}}),y=F(()=>{var a;const{schema:s,tableAction:t,formModel:r,formActionType:l}=e;let{componentProps:n={}}=s;return P(n)&&(n=(a=n({schema:s,tableAction:t,formModel:r,formActionType:l}))!=null?a:{}),me(s.component)&&(n=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},n)),n}),S=F(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=o(y);let l=!!s||r;return D(t)&&(l=t),P(t)&&(l=t(o(p))),l}),j=F(()=>{const{readonly:s}=e.formProps,{dynamicReadonly:t}=e.schema,{readonly:r=!1}=o(y);let l=s||r;return D(t)&&(l=t),P(t)&&(l=t(o(p))),l});function N(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,l=r&&D(e.isAdvanced)?e.isAdvanced:!0;let n=!0,a=!0;return D(s)&&(n=s),D(t)&&(a=t),P(s)&&(n=s(o(p))),P(t)&&(a=t(o(p))),n=n&&l,{isShow:n,isIfShow:a}}function x(){var M;const{rules:s=[],component:t,rulesMessageJoinLabel:r,label:l,dynamicRules:n,required:a}=e.schema;if(P(n))return n(o(p));let c=ge(s);const{rulesMessageJoinLabel:A}=e.formProps,w=(Reflect.has(e.schema,"rulesMessageJoinLabel")?r:A)?l:"",m=t?G(t)+w:w;function h(d,i){const C=d.message||m;return i===void 0||ye(i)||Array.isArray(i)&&i.length===0||typeof i=="string"&&i.trim()===""||typeof i=="object"&&Reflect.has(i,"checked")&&Reflect.has(i,"halfChecked")&&Array.isArray(i.checked)&&Array.isArray(i.halfChecked)&&i.checked.length===0&&i.halfChecked.length===0?Promise.reject(C):Promise.resolve()}const L=P(a)?a(o(p)):a;if(L)if(!c||c.length===0){const d=K.includes(t||"Input")?"blur":"change";c=[{required:L,validator:h,trigger:d}]}else c.findIndex(i=>Reflect.has(i,"required"))===-1&&c.push({required:L,validator:h});const T=c.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(T!==-1){const d=c[T],{isShow:i}=N();if(i||(d.required=!1),t){d.message=d.message||m,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const C=(M=o(y))==null?void 0:M.valueFormat;he(d,t,C)}}const I=c.findIndex(d=>d.max);return I!==-1&&!c[I].validator&&(c[I].message=c[I].message||b("component.form.maxTip",[c[I].max])),c}function V(){var d;if(!xe(e.schema))return null;const{renderComponentContent:s,component:t,field:r,changeEvent:l="change",valueField:n}=e.schema,a=t&&["Switch","Checkbox"].includes(t),c=`on${Ce(l)}`,A={[c]:(...i)=>{const[C]=i;h[c]&&h[c](...i);const B=C?C.target:null,Y=B?a?B.checked:B.value:C;e.setFormModel(r,Y,e.schema)}},R=z.get(t),{autoSetPlaceHolder:w,size:m}=e.formProps,h=J(f({allowClear:!0,size:m},o(y)),{disabled:o(S),readonly:o(j)});!h.disabled&&w&&t!=="RangePicker"&&t&&(h.placeholder=((d=o(y))==null?void 0:d.placeholder)||G(t)),h.codeField=r,h.formValues=o(p);const T={[n||(a?"checked":"value")]:e.formModel[r]},I=f(f(f({},h),A),T);if(!s)return g(R,I,null);const M=P(s)?f({},s(o(p),{disabled:o(S),readonly:o(j)})):{default:()=>s};return g(R,I,_(M)?M:{default:()=>[M]})}function v(){const{label:s,helpMessage:t,helpComponentProps:r,subLabel:l}=e.schema,n=l?g("span",null,[s,ie(" "),g("span",{class:"text-secondary"},[l])]):s,a=P(t)?t(o(p)):t;return!a||Array.isArray(a)&&a.length===0?n:g("span",null,[n,g(ue,$({placement:"top",class:"mx-1",text:a},r),null)])}function X(){const{itemProps:s,slot:t,render:r,field:l,suffix:n,component:a}=e.schema,{labelCol:c,wrapperCol:A}=o(q),{colon:R}=e.formProps,w={disabled:o(S),readonly:o(j)};if(a==="Divider"){let m;return g(Q,{span:24},{default:()=>[g(pe,o(y),_(m=v())?m:{default:()=>[m]})]})}else if(a==="BasicTitle"){let m;return g(U.Item,{labelCol:c,wrapperCol:A,name:l,class:{"suffix-item":!!n}},{default:()=>[g(fe,o(y),_(m=v())?m:{default:()=>[m]})]})}else{const m=()=>t?E(u,t,o(p),w):r?r(o(p),w):V(),h=!!n,L=P(n)?n(o(p)):n;return a&&K.includes(a)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),g(U.Item,$({name:l,colon:R,class:{"suffix-item":h}},s,{label:v(),rules:x(),labelCol:c,wrapperCol:A}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[m()]),h&&g("span",{class:"suffix"},[L])])]})}}return()=>{let s;const{colProps:t={},colSlot:r,renderColContent:l,component:n,slot:a}=e.schema;if(!(n&&z.has(n)||a))return null;const{baseColProps:c={}}=e.formProps,A=f(f({},c),t),{isIfShow:R,isShow:w}=N(),m=o(p),h={disabled:o(S),readonly:o(j)};return R&&ae(g(Q,A,_(s=r?E(u,r,m,h):l?l(m,h):X())?s:{default:()=>[s]}),[[ce,w]])}}});export{Me as _};
