var d=(p,m,o)=>new Promise((l,c)=>{var u=t=>{try{s(o.next(t))}catch(i){c(i)}},r=t=>{try{s(o.throw(t))}catch(i){c(i)}},s=t=>t.done?l(t.value):Promise.resolve(t.value).then(u,r);s((o=o.apply(p,m)).next())});import{a as N,B as _}from"./index-CMSTH4sS.js";import{u as C,_ as x}from"./useForm-uR1ZVBCA.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./componentMap-DPcekmXH.js";import{c as M,a as S,b as q,d as v}from"./index-HlBkaR6C.js";import{bp as B,bq as F}from"./entry/index-CMepwc5X-1716790511191.js";import{d as L,f as k,c as P,_ as R,a8 as T,a9 as A,k as V,u as n,ad as D}from"./vue-Bw3NQgLF.js";const J=[{dataIndex:"categoryName",title:"分类名称"},{dataIndex:"categoryCode",title:"分类编码"},{dataIndex:"sortNum",title:"排序"}],K=[{field:"categoryName",label:"分类名称",component:"Input"},{field:"categoryCode",label:"分类编码",component:"Input"}],U=[{field:"id",label:"id",component:"Input",show:!1},{field:"parentId",label:"父级分类",required:!0,defaultValue:0,component:"TreeSelect"},{field:"categoryName",label:"分类名称",component:"Input",required:!0},{field:"categoryCode",label:"分类编码",component:"Input",required:!0},{field:"sortNum",label:"排序",component:"InputNumber",required:!1}],Q=L({name:"CategoryModal",__name:"CategoryModal",emits:["register","reload"],setup(p,{emit:m}){const o=m,l=k(!1),c=P(()=>l.value?"编辑流程分类":"新增流程分类"),[u,{modalLoading:r,closeModal:s}]=N(a=>d(this,null,function*(){r(!0);const{id:e,update:y}=a;if(l.value=y,y&&e){const w=yield M(e);yield f(w)}else yield f({parentId:e!=null?e:0});yield t(),r(!1)}));function t(){return d(this,null,function*(){const a=yield S();let e=B(a,{id:"id",pid:"parentId"});e=[{categoryName:"根目录",id:0,children:e}],F(e,"categoryName"," / "),yield I({field:"parentId",componentProps:{treeData:e,treeLine:{showLeafIcon:!1},fieldNames:{label:"categoryName",value:"id"},treeDefaultExpandAll:!0,treeNodeLabelProp:"fullName"}})})}const[i,{updateSchema:I,setFieldsValue:f,resetForm:g,validate:b}]=C({labelWidth:100,name:"category_modal",showActionButtonGroup:!1,schemas:U,baseColProps:{span:24}});function h(){return d(this,null,function*(){try{r(!0);const a=yield b();n(l)?yield q(a):yield v(a),o("reload"),s(),yield g()}catch(a){console.log(a)}finally{r(!1)}})}return(a,e)=>(R(),T(n(_),D(a.$attrs,{title:c.value,width:600,"min-height":350,onRegister:n(u),onOk:h,onCancel:n(g)}),{default:A(()=>[V(n(x),{onRegister:n(i)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{Q as _,J as c,K as f};
