var l=(e,o,r)=>new Promise((m,i)=>{var n=t=>{try{a(r.next(t))}catch(p){i(p)}},d=t=>{try{a(r.throw(t))}catch(p){i(p)}},a=t=>t.done?m(t.value):Promise.resolve(t.value).then(n,d);a((r=r.apply(e,o)).next())});import{P as g}from"./index-C4nZBquz.js";import{u as I,_}from"./useTable-CNbfTOCZ.js";import{_ as x}from"./index-DCvxWw7W.js";import{a as h,b}from"./index-Dfq6BVW_.js";import{h as y}from"./entry/index-BbJQUQ84-1718268303552.js";import{u as C}from"./useRender-D1Q3fAQ3.js";import{d as k,Z as c,a8 as u,a9 as f,k as w,u as s,ab as N}from"./vue-Cw15aJ-2.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./antd-DMGzOvrA.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./index-BIkrAlj7.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./index-Dx0uas1b.js";import"./dict-vVDMuEaq.js";const{renderDateTime:R,renderBrowserIcon:P,renderOsIcon:T,renderTag:L}=C(),B=[{title:"登录平台",dataIndex:"deviceType",customRender({value:e}){return L(e,"blue")}},{title:"登录账号",dataIndex:"userName"},{title:"部门名称",dataIndex:"deptName"},{title:"IP地址",dataIndex:"ipaddr"},{title:"登录地址",dataIndex:"loginLocation"},{title:"浏览器",dataIndex:"browser",customRender({value:e}){return P(e,!0)}},{title:"系统",dataIndex:"os",customRender({value:e}){if(e){const o=e.split(" or ");o.length===2&&(e=o[0])}return T(e,!0)}},{title:"登录时间",dataIndex:"loginTime",customRender({value:e}){return R(e)}}],$=[{label:"IP地址",field:"ipaddr",component:"Input"},{label:"用户账号",field:"userName",component:"Input"}],ae=k({name:"Online",__name:"index",setup(e){const[o,{reload:r}]=I({title:"在线用户列表",showIndexColumn:!0,api:h,rowKey:"tokenId",useSearchForm:!0,formConfig:{schemas:$,baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:B,actionColumn:{width:160,title:"操作",key:"action",fixed:"right"}}),{createMessage:m}=y();function i(n){return l(this,null,function*(){yield b(n.tokenId),yield r(),m.success(`退出用户账号[${n.userName}]成功`)})}return(n,d)=>(c(),u(s(g),{dense:""},{default:f(()=>[w(s(_),{onRegister:s(o)},{bodyCell:f(({column:a,record:t})=>[a.key==="action"?(c(),u(s(x),{key:0,stopButtonPropagation:"",actions:[{label:"强制退出",icon:"ic:outline-logout",type:"primary",danger:!0,auth:"monitor:online:forceLogout",ghost:!0,popConfirm:{placement:"left",title:`是否强制退出用户[${t.userName}]?`,confirm:i.bind(null,t)}}]},null,8,["actions"])):N("",!0)]),_:1},8,["onRegister"])]),_:1}))}});export{ae as default};
