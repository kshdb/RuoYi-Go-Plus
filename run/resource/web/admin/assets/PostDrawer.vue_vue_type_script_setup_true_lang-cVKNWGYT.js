var n=(u,l,o)=>new Promise((m,s)=>{var d=a=>{try{t(o.next(a))}catch(i){s(i)}},c=a=>{try{t(o.throw(a))}catch(i){s(i)}},t=a=>a.done?m(a.value):Promise.resolve(a.value).then(d,c);t((o=o.apply(u,l)).next())});import{a as P,B as k}from"./index-ov0mgIjt.js";import{u as v,_ as y}from"./useForm-uR1ZVBCA.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./componentMap-DPcekmXH.js";import{p as B,a as F,b as N}from"./index-tTbWyNHk.js";import{m as x}from"./post.data-Dy1v034U.js";import{u as L}from"./useSize-tRF5RUOv.js";import{d as R}from"./index-Cm0AtxlD.js";import{bq as S}from"./entry/index-CMepwc5X-1716790511191.js";import{d as A,f as W,c as O,_ as T,a8 as U,a9 as V,k as $,u as r,ad as q}from"./vue-Bw3NQgLF.js";const Z=A({name:"PostDrawer",__name:"PostDrawer",emits:["register","reload"],setup(u,{emit:l}){const o=l,m=L(600),s=W(!1),d=O(()=>s.value?"编辑岗位":"新增岗位"),[c,{drawerLoading:t,closeDrawer:a}]=P(i);function i(e){return n(this,null,function*(){t(!0);const{record:p,update:w}=e;if(s.value=w,w&&p){const I=yield B(p.postId);yield D(I)}yield h(),t(!1)})}function h(){return n(this,null,function*(){const e=yield R();S(e,"label"," / "),yield g([{field:"deptId",componentProps:{treeData:e,fieldNames:{value:"id",label:"label"},treeDefaultExpandAll:!0,treeLine:{showLeafIcon:!1},treeNodeLabelProp:"fullName"}}])})}const[_,{setFieldsValue:D,resetForm:f,validate:b,updateSchema:g}]=v({labelWidth:80,name:"post_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:x});function C(){return n(this,null,function*(){try{t(!0);const e=yield b();r(s)?yield F(e):yield N(e),o("reload"),a(),yield f()}catch(e){}finally{t(!1)}})}return(e,p)=>(T(),U(r(k),q(e.$attrs,{title:d.value,width:r(m),"show-footer":!0,onRegister:r(c),onOk:C,onClose:r(f)}),{default:V(()=>[$(r(y),{onRegister:r(_)},null,8,["onRegister"])]),_:1},16,["title","width","onRegister","onClose"]))}});export{Z as _};
