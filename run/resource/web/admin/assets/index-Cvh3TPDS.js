import{k as a,d as b,Z as n,a8 as w,a9 as i,u as e,ac as T,f as _,w as M,y as S,a7 as A,_ as d,F as V,aa as B,m as $,G as y,a0 as h,ab as N,A as F}from"./vue-Cw15aJ-2.js";import{B as O,u as U}from"./index-BIkrAlj7.js";import{D as P}from"./index-BVlzXcPd.js";import{m as p,E as u,n as j}from"./entry/index-BbJQUQ84-1718268303552.js";import{A as G,f as J}from"./antd-DMGzOvrA.js";import{u as X}from"./useDescription-DLkhA-M6.js";import{u as Z,_ as q}from"./useTable-CNbfTOCZ.js";import{_ as z}from"./index-DCvxWw7W.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";const{t:s}=p();function L(){return[{dataIndex:"type",title:s("sys.errorLog.tableColumnType"),width:80,customRender:({text:t})=>{const r=t===u.VUE?"green":t===u.RESOURCE?"cyan":t===u.PROMISE?"blue":u.AJAX?"red":"purple";return a(G,{color:r},{default:()=>t})}},{dataIndex:"url",title:"URL",width:200},{dataIndex:"time",title:s("sys.errorLog.tableColumnDate"),width:160},{dataIndex:"file",title:s("sys.errorLog.tableColumnFile"),width:200},{dataIndex:"name",title:"Name",width:200},{dataIndex:"message",title:s("sys.errorLog.tableColumnMsg"),width:300},{dataIndex:"stack",title:s("sys.errorLog.tableColumnStackMsg")}]}function H(){return L().map(t=>({field:t.dataIndex,label:t.title}))}const K=b({__name:"DetailModal",props:{info:{type:Object,default:null}},setup(t){const{t:r}=p(),[l]=X({column:2,schema:H()});return(o,f)=>(n(),w(e(O),T({width:800,title:e(r)("sys.errorLog.tableActionDesc")},o.$attrs),{default:i(()=>[a(e(P),{data:t.info,onRegister:e(l)},null,8,["data","onRegister"])]),_:1},16,["title"]))}}),Q={class:"p-4"},W=["src"],Ce=b({__name:"index",setup(t){const r=_(),l=_([]),{t:o}=p(),f=j(),[C,{setTableData:E}]=Z({title:o("sys.errorLog.tableTitle"),columns:L(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[D,{openModal:k}]=U();M(()=>f.getErrorLogInfoList,c=>{S(()=>{E(J(c))})},{immediate:!0});function I(c){r.value=c,k(!0)}function R(){throw new Error("fire vue error!")}function x(){l.value.push(`${new Date().getTime()}.png`)}return(c,Y)=>{const g=A("a-button");return n(),d("div",Q,[(n(!0),d(V,null,B(l.value,m=>$((n(),d("img",{key:m,src:m,alt:""},null,8,W)),[[F,!1]])),128)),a(K,{info:r.value,onRegister:e(D)},null,8,["info","onRegister"]),a(e(q),{onRegister:e(C),class:"error-handle-table"},{toolbar:i(()=>[a(g,{onClick:R,type:"primary"},{default:i(()=>[y(h(e(o)("sys.errorLog.fireVueError")),1)]),_:1}),a(g,{onClick:x,type:"primary"},{default:i(()=>[y(h(e(o)("sys.errorLog.fireResourceError")),1)]),_:1})]),bodyCell:i(({column:m,record:v})=>[m.key==="action"?(n(),w(e(z),{key:0,actions:[{label:e(o)("sys.errorLog.tableActionDesc"),onClick:I.bind(null,v)}]},null,8,["actions"])):N("",!0)]),_:1},8,["onRegister"])])}}});export{Ce as default};
