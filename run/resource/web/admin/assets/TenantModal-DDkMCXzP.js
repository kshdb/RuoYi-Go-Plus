var m=(u,l,o)=>new Promise((s,r)=>{var p=a=>{try{e(o.next(a))}catch(n){r(n)}},c=a=>{try{e(o.throw(a))}catch(n){r(n)}},e=a=>a.done?s(a.value):Promise.resolve(a.value).then(p,c);e((o=o.apply(u,l)).next())});import{a as M,B as y}from"./index-BIkrAlj7.js";import{u as B,_ as C}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{m as F}from"./tenant.data-DPEsi-Rf.js";import{bF as I,bG as S,bH as R,bI as T}from"./entry/index-BbJQUQ84-1718268303552.js";import{p as N}from"./index-BwotnLdp.js";import{d as P,f as x,c as A,Z as G,a8 as L,a9 as O,k as U,u as i,ac as V}from"./vue-Cw15aJ-2.js";import"./antd-DMGzOvrA.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./helper-CXVLNTBN.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./index-DCvxWw7W.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./copyTextToClipboard-uEEWQikS.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./style-CLEvKZSv.js";import"./rules-Boel_RXz.js";const ma=P({name:"TenantModal",__name:"TenantModal",emits:["register","reload"],setup(u,{emit:l}){const o=l,s=x(!1),r=A(()=>s.value?"编辑租户":"新增租户"),[p,{closeModal:c,modalLoading:e}]=M(t=>m(this,null,function*(){e(!0);const{record:d,update:g}=t;if(s.value=g,g&&d){const v=yield I(d.id);yield w(v)}yield a(),e(!1)}));function a(){return m(this,null,function*(){const t=yield N();yield h({field:"packageId",componentProps:{fieldNames:{label:"packageName",value:"packageId"},options:t,disabled:s.value}})})}const[n,{setFieldsValue:w,validate:_,resetForm:f,updateSchema:h}]=B({labelWidth:80,name:"tenant_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:F}),{initTenant:b}=S();function k(){return m(this,null,function*(){try{e(!0);const t=yield _();i(s)?yield R(t):yield T(t),yield b(),f(),o("reload",c)}catch(t){}finally{e(!1)}})}return(t,d)=>(G(),L(i(y),V(t.$attrs,{title:r.value,width:600,onRegister:i(p),onOk:k,onCancel:i(f)}),{default:O(()=>[U(i(C),{onRegister:i(n)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{ma as default};
