var w=(h,n,s)=>new Promise((d,p)=>{var u=o=>{try{l(s.next(o))}catch(m){p(m)}},f=o=>{try{l(s.throw(o))}catch(m){p(m)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(u,f);l((s=s.apply(h,n)).next())});import{P as I}from"./index-C4nZBquz.js";import{u as W,_ as E}from"./useTable-CNbfTOCZ.js";import{_ as D}from"./index-DCvxWw7W.js";import{schemas as K,columns as N}from"./data-0wk-Gn9f.js";import{c as F,I as G,h as $}from"./entry/index-BbJQUQ84-1718268303552.js";import{k as y,l as U,u as q}from"./index-DH8S7RKQ.js";import Z from"./index-BsD3RzB-.js";import{u as j}from"./index-BIkrAlj7.js";import{u as z}from"./index-BLDmWVyR.js";import{_ as H}from"./ProcessVariableDrawer.vue_vue_type_script_setup_true_lang-BV83EGMm.js";import{d as J,f as L,a7 as O,Z as k,a8 as C,a9 as i,k as r,u as e,G as b,ab as Q}from"./vue-Cw15aJ-2.js";import{a3 as X,a2 as v}from"./antd-DMGzOvrA.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./useRender-D1Q3fAQ3.js";import"./index-Dx0uas1b.js";import"./dict-vVDMuEaq.js";import"./dictEnum-DeC8h6ZR.js";import"./index-BcLdq1Bd.js";import"./index-Bys7JeoU.js";import"./useSize-CUNtmCvH.js";import"./index-BVlzXcPd.js";import"./useDescription-DLkhA-M6.js";const De=J({name:"AllTaskWaiting",__name:"allTaskWaiting",setup(h){const n=L("waiting");function s(){return w(this,null,function*(){const t=n.value==="waiting"?y:U;p({api:t}),yield u()})}const[d,{setProps:p,reload:u,selected:f,getSelectRowKeys:l,setSelectedRowKeys:o}]=W({rowSelection:{type:"checkbox"},title:"所有待办任务列表",showIndexColumn:!1,api:y,rowKey:"id",useSearchForm:!0,formConfig:{schemas:K,baseColProps:{xs:24,sm:24,md:24,lg:6},labelWidth:80},columns:N,actionColumn:{width:220,title:"操作",key:"action",fixed:"right"}}),[m,{openModal:R}]=j();function P(){R(!0)}const{createMessage:S}=$();function x(t){return w(this,null,function*(){const a=l();if(a.length===0||t.length===0){S.warn("未选中, 无法处理");return}const g=t[0].userId;yield q(a,g),yield u(),o([])})}const M=F();function T(t){const a=t.wfNodeConfigVo.wfFormManageVo.router;M({path:a,query:{id:t.businessKey,type:"preview"}})}const[V,{openDrawer:A}]=z();function B(t){A(!0,t.id)}return(t,a)=>{const g=O("a-button");return k(),C(e(I),{dense:""},{default:i(()=>[r(e(E),{onRegister:e(d)},{toolbar:i(()=>[r(g,{type:"primary",disabled:!e(f),onClick:P},{default:i(()=>[b("修改办理人")]),_:1},8,["disabled"]),r(e(X),{"button-style":"solid",value:n.value,"onUpdate:value":a[0]||(a[0]=c=>n.value=c),onChange:s},{default:i(()=>[r(e(v),{value:"waiting"},{default:i(()=>[b("运行中")]),_:1}),r(e(v),{value:"finished"},{default:i(()=>[b("已完成")]),_:1})]),_:1},8,["value"])]),bodyCell:i(({column:c,record:_})=>[c&&_&&c.key==="action"?(k(),C(e(D),{key:0,stopButtonPropagation:"",actions:[{label:"审批记录",icon:e(G).PREVIEW,onClick:T.bind(null,_)},{label:"流程变量",icon:"carbon:parameter",onClick:B.bind(null,_),ifShow:n.value==="waiting"}]},null,8,["actions"])):Q("",!0)]),_:1},8,["onRegister"]),r(Z,{multiple:!1,onRegister:e(m),onSelectDone:x},null,8,["onRegister"]),r(H,{onRegister:e(V)},null,8,["onRegister"])]),_:1})}}});export{De as default};
