var n=(u,l,o)=>new Promise((m,s)=>{var c=a=>{try{t(o.next(a))}catch(i){s(i)}},d=a=>{try{t(o.throw(a))}catch(i){s(i)}},t=a=>a.done?m(a.value):Promise.resolve(a.value).then(c,d);t((o=o.apply(u,l)).next())});import{a as P,B as k}from"./index-BLDmWVyR.js";import{u as v,_ as x}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{p as y,a as B,b as F}from"./index-DGT8hE2-.js";import{m as N}from"./post.data-tw5vigc8.js";import{u as L}from"./useSize-CUNtmCvH.js";import{d as R}from"./index-Bys7JeoU.js";import{bx as S}from"./entry/index-BbJQUQ84-1718268303552.js";import{d as A,f as W,c as O,Z as T,a8 as U,a9 as V,k as $,u as r,ac as E}from"./vue-Cw15aJ-2.js";const Y=A({name:"PostDrawer",__name:"PostDrawer",emits:["register","reload"],setup(u,{emit:l}){const o=l,m=L(600),s=W(!1),c=O(()=>s.value?"编辑岗位":"新增岗位"),[d,{drawerLoading:t,closeDrawer:a}]=P(i);function i(e){return n(this,null,function*(){t(!0);const{record:p,update:w}=e;if(s.value=w,w&&p){const I=yield y(p.postId);yield D(I)}yield h(),t(!1)})}function h(){return n(this,null,function*(){const e=yield R();S(e,"label"," / "),yield g([{field:"deptId",componentProps:{treeData:e,fieldNames:{value:"id",label:"label"},treeDefaultExpandAll:!0,treeLine:{showLeafIcon:!1},treeNodeLabelProp:"fullName"}}])})}const[_,{setFieldsValue:D,resetForm:f,validate:b,updateSchema:g}]=v({labelWidth:80,name:"post_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:N});function C(){return n(this,null,function*(){try{t(!0);const e=yield b();r(s)?yield B(e):yield F(e),o("reload"),a(),yield f()}catch(e){}finally{t(!1)}})}return(e,p)=>(T(),U(r(k),E(e.$attrs,{title:c.value,width:r(m),"show-footer":!0,onRegister:r(d),onOk:C,onClose:r(f)}),{default:V(()=>[$(r(x),{onRegister:r(_)},null,8,["onRegister"])]),_:1},16,["title","width","onRegister","onClose"]))}});export{Y as _};
