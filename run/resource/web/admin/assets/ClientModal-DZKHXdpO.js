var u=(f,c,a)=>new Promise((i,l)=>{var p=e=>{try{r(a.next(e))}catch(s){l(s)}},m=e=>{try{r(a.throw(e))}catch(s){l(s)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(p,m);r((a=a.apply(f,c)).next())});import{a as C,B as b}from"./index-CMSTH4sS.js";import{u as M,_ as v}from"./useForm-uR1ZVBCA.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./componentMap-DPcekmXH.js";import{c as B,m as k,a as F,b as I}from"./client.data-C7_aKPac.js";import{d as P,f as R,c as S,_ as x,a8 as A,a9 as L,k as T,u as o,ad as U}from"./vue-Bw3NQgLF.js";import"./entry/index-CMepwc5X-1716790511191.js";import"./antd-BRjMhd0C.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./helper-CfJJkrf5.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./index-Rv_3g2e8.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./dictEnum-DeC8h6ZR.js";import"./dict-C9gNHjAh.js";import"./useRender-C6p2srTi.js";import"./index-BhefpKLc.js";const re=P({name:"ClientModal",__name:"ClientModal",emits:["register","reload"],setup(f,{emit:c}){const a=c,i=R(!1),l=S(()=>i.value?"编辑客户端管理":"新增客户端管理"),[p,{modalLoading:m,closeModal:r}]=C(t=>u(this,null,function*(){const{record:d,update:n}=t;if(i.value=n,h([{field:"clientId",show:n},{field:"clientKey",componentProps:{disabled:n}},{field:"clientSecret",componentProps:{disabled:n}}]),n&&d){const y=yield B(d.id);yield s(y)}})),[e,{setFieldsValue:s,resetForm:_,validate:g,updateSchema:h}]=M({layout:"vertical",labelWidth:180,name:"client_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:k});function w(){return u(this,null,function*(){try{m(!0);const t=yield g();t.grantType=t.grantTypeList.join(","),o(i)?yield F(t):yield I(t),yield _(),a("reload",r)}catch(t){}finally{m(!1)}})}return(t,d)=>(x(),A(o(b),U(t.$attrs,{title:l.value,width:600,onRegister:o(p),onOk:w,onCancel:o(_)}),{default:L(()=>[T(o(v),{onRegister:o(e)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{re as default};
