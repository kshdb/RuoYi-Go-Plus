var w=(b,n,s)=>new Promise((d,p)=>{var u=t=>{try{l(s.next(t))}catch(m){p(m)}},f=t=>{try{l(s.throw(t))}catch(m){p(m)}},l=t=>t.done?d(t.value):Promise.resolve(t.value).then(u,f);l((s=s.apply(b,n)).next())});import{P as I}from"./index-DrfqwNLV.js";import{u as W,_ as E}from"./useTable-BlleqRm-.js";import{_ as D}from"./index-Rv_3g2e8.js";import{schemas as K,columns as N}from"./data-CAxwEMq8.js";import{c as F,I as G,h as $}from"./entry/index-CMepwc5X-1716790511191.js";import{f as y,h as U,u as q}from"./index-D8V_F1G-.js";import j from"./index-BMkdtMeE.js";import{u as z}from"./index-CMSTH4sS.js";import{u as H}from"./index-ov0mgIjt.js";import{_ as J}from"./ProcessVariableDrawer.vue_vue_type_script_setup_true_lang-0TFTCrp2.js";import{d as L,f as O,aa as Q,_ as C,a8 as k,a9 as i,k as r,u as o,G as h,ac as X}from"./vue-Bw3NQgLF.js";import{a6 as Y,a5 as v}from"./antd-BRjMhd0C.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./useRender-C6p2srTi.js";import"./index-BhefpKLc.js";import"./dict-C9gNHjAh.js";import"./dictEnum-DeC8h6ZR.js";import"./index-CwwL6bPg.js";import"./index-Cm0AtxlD.js";import"./useSize-tRF5RUOv.js";import"./index-ByLT-Lkv.js";import"./useDescription-Cm6mcuk5.js";const Ee=L({name:"AllTaskWaiting",__name:"allTaskWaiting",setup(b){const n=O("waiting");function s(){return w(this,null,function*(){const e=n.value==="waiting"?y:U;p({api:e}),yield u()})}const[d,{setProps:p,reload:u,selected:f,getSelectRowKeys:l,setSelectedRowKeys:t}]=W({rowSelection:{type:"checkbox"},title:"所有待办任务列表",showIndexColumn:!1,api:y,rowKey:"id",useSearchForm:!0,formConfig:{schemas:K,baseColProps:{xs:24,sm:24,md:24,lg:6},labelWidth:80},columns:N,actionColumn:{width:220,title:"操作",key:"action",fixed:"right"}}),[m,{openModal:R}]=z();function P(){R(!0)}const{createMessage:S}=$();function x(e){return w(this,null,function*(){console.log(e);const a=l();if(a.length===0||e.length===0){S.warn("未选中, 无法处理");return}const g=e[0].userId;yield q(a,g),yield u(),t([])})}const M=F();function T(e){const a=e.wfNodeConfigVo.wfFormManageVo.router;M({path:a,query:{id:e.businessKey,type:"preview"}})}const[V,{openDrawer:A}]=H();function B(e){A(!0,e.id)}return(e,a)=>{const g=Q("a-button");return C(),k(o(I),{dense:""},{default:i(()=>[r(o(E),{onRegister:o(d)},{toolbar:i(()=>[r(g,{type:"primary",disabled:!o(f),onClick:P},{default:i(()=>[h("修改办理人")]),_:1},8,["disabled"]),r(o(Y),{"button-style":"solid",value:n.value,"onUpdate:value":a[0]||(a[0]=c=>n.value=c),onChange:s},{default:i(()=>[r(o(v),{value:"waiting"},{default:i(()=>[h("运行中")]),_:1}),r(o(v),{value:"finished"},{default:i(()=>[h("已完成")]),_:1})]),_:1},8,["value"])]),bodyCell:i(({column:c,record:_})=>[c&&_&&c.key==="action"?(C(),k(o(D),{key:0,stopButtonPropagation:"",actions:[{label:"审批记录",icon:o(G).PREVIEW,onClick:T.bind(null,_)},{label:"流程变量",icon:"carbon:parameter",onClick:B.bind(null,_),ifShow:n.value==="waiting"}]},null,8,["actions"])):X("",!0)]),_:1},8,["onRegister"]),r(j,{multiple:!1,onRegister:o(m),onSelectDone:x},null,8,["onRegister"]),r(J,{onRegister:o(V)},null,8,["onRegister"])]),_:1})}}});export{Ee as default};
