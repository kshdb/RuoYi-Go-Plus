const __vite__fileDeps=["assets/TableImg-Bey8Jk5G.js","assets/useTable-CNbfTOCZ.js","assets/vue-Cw15aJ-2.js","assets/useForm-BsovIqMX.js","assets/FormItem.vue_vue_type_script_lang-C67_1cA1.js","assets/componentMap-qA-f8iV4.js","assets/RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js","assets/antd-DMGzOvrA.js","assets/entry/index-BbJQUQ84-1718268303552.js","assets/index-CecYrUMy.css","assets/index-DCvxWw7W.js","assets/index-BIkrAlj7.js","assets/useWindowSizeFn-BKs0NEK5.js","assets/index-By19Ecjh.css","assets/useSortable-BTdBE9Oa.js","assets/download-DOz9ltI1.js","assets/useLoading-D1in2ACg.js","assets/index-BZ-W08GR.css","assets/copyTextToClipboard-uEEWQikS.js","assets/onMountedOrActivated-CSHfHTyc.js","assets/style-CLEvKZSv.js","assets/style-B2B5Icin.css","assets/componentMap-zRpHRZJg.css","assets/helper-CXVLNTBN.js","assets/BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js","assets/BasicForm-Sl_TyPJm.css","assets/sortable.esm-DFFrMEeC.js","assets/useTable-PWMzGM0A.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var v=(t,b,o)=>new Promise((w,f)=>{var _=e=>{try{d(o.next(e))}catch(m){f(m)}},k=e=>{try{d(o.throw(e))}catch(m){f(m)}},d=e=>e.done?w(e.value):Promise.resolve(e.value).then(_,k);d((o=o.apply(t,b)).next())});import{N as J,c as Q,I as R}from"./entry/index-BbJQUQ84-1718268303552.js";import{P as X}from"./index-C4nZBquz.js";import{u as y,_ as T}from"./useTable-CNbfTOCZ.js";import{_ as M}from"./index-DCvxWw7W.js";import{u as tt}from"./useLoading-D1in2ACg.js";import{a as at,b as L,o as ot}from"./index-Dwl0vFWZ.js";import{h as et}from"./index-BaTIRAV6.js";import{d as nt}from"./download-DOz9ltI1.js";import{u as st}from"./useRender-D1Q3fAQ3.js";import N from"./FileUpload-B57sbYJI.js";import{c as it}from"./createAsyncComponent-DgU5c3Ru.js";import{aa as lt,T as S,a6 as rt}from"./antd-DMGzOvrA.js";import{d as pt,f as ct,r as j,o as dt,a7 as mt,n as ut,Z as r,a8 as p,a9 as s,k as c,u as a,m as h,G as C,ac as z,_ as ft,F as gt,a0 as xt,ab as B}from"./vue-Cw15aJ-2.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./index-BIkrAlj7.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./index-Dx0uas1b.js";import"./dict-vVDMuEaq.js";const{renderTooltip:D}=st(),vt=[{title:"文件名",dataIndex:"fileName",ellipsis:!0,customRender({value:t}){return D(t)}},{title:"文件原名",dataIndex:"originalName",ellipsis:!0,customRender({value:t}){return D(t)}},{title:"文件拓展名",dataIndex:"fileSuffix"},{title:"文件预览",dataIndex:"url",ellipsis:!0,customRender({value:t}){return D(t)}},{title:"创建时间",dataIndex:"createTime",sorter:!0},{title:"上传人",dataIndex:"createByName"},{title:"服务商",dataIndex:"service"}],ht=[{label:"文件名",field:"fileName",component:"Input"},{label:"原名",field:"originalName",component:"Input"},{label:"拓展名",field:"fileSuffix",component:"Input"},{label:"服务商",field:"service",component:"Input"},{label:"创建时间",field:"createTime",component:"RangePicker"}];var P=(t=>(t.threegp="video/3gpp",t.apk="application/vnd.android.package-archive",t.asf="video/x-ms-asf",t.avi="video/x-msvideo",t.bin="application/octet-stream",t.bmp="image/bmp",t.c="text/plain",t.class_="application/octet-stream",t.conf="text/plain",t.cpp="text/plain",t.doc="application/msword",t.docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",t.xls="application/vnd.ms-excel",t.xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.exe="application/octet-stream",t.gif="image/gif",t.gtar="application/x-gtar",t.gz="application/x-gzip",t.h="text/plain",t.htm="text/html",t.html="text/html",t.jar="application/java-archive",t.java="text/plain",t.jpeg="image/jpeg",t.jpg="image/jpeg",t.js="application/x-javascript",t.log="text/plain",t.m3u="audio/x-mpegurl",t.m4a="audio/mp4a-latm",t.m4b="audio/mp4a-latm",t.m4p="audio/mp4a-latm",t.m4u="video/vnd.mpegurl",t.m4v="video/x-m4v",t.mov="video/quicktime",t.mp2="audio/x-mpeg",t.mp3="audio/x-mpeg",t.mp4="video/mp4",t.mpc="application/vnd.mpohun.certificate",t.mpe="video/mpeg",t.mpeg="video/mpeg",t.mpg="video/mpeg",t.mpg4="video/mp4",t.mpga="audio/mpeg",t.msg="application/vnd.ms-outlook",t.ogg="audio/ogg",t.pdf="application/pdf",t.png="image/png",t.pps="application/vnd.ms-powerpoint",t.ppt="application/vnd.ms-powerpoint",t.pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",t.prop="text/plain",t.rc="text/plain",t.rmvb="audio/x-pn-realaudio",t.rtf="application/rtf",t.sh="text/plain",t.tar="application/x-tar",t.tgz="application/x-compressed",t.txt="text/plain",t.wav="audio/x-wav",t.wma="audio/x-ms-wma",t.wmv="audio/x-ms-wmv",t.wps="application/vnd.ms-works",t.xml="text/plain",t.z="application/x-compress",t.zip="application/x-zip-compressed",t))(P||{});const Qt=pt({name:"Oss",__name:"index",setup(t){const b=it(()=>J(()=>import("./TableImg-Bey8Jk5G.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),o=ct(!1),w=j({btnText:"上传图片",accept:["image/*"],maxSize:5}),{txt:f,doc:_,docx:k,xls:d,xlsx:e,ppt:m,pptx:Y,pdf:E,mp3:F}=P,A=j({btnText:"上传文件",accept:[f,_,k,d,e,m,Y,E,F],maxSize:10});function O(n){return["jpg","jpeg","png","gif","webp"].some(g=>n.toLocaleLowerCase().includes(g))}dt(()=>v(this,null,function*(){const n=yield et("sys.oss.previewListResource");o.value=!!n}));const[V,{reload:I,selected:$,multipleRemove:W}]=y({rowSelection:{type:"checkbox"},title:"文件列表",showIndexColumn:!1,api:at,rowKey:"ossId",useSearchForm:!0,formConfig:{schemas:ht,labelWidth:100,baseColProps:{xs:24,sm:24,md:24,lg:6},fieldMapToTime:[["createTime",["params[beginCreateTime]","params[endCreateTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},columns:vt,actionColumn:{width:200,title:"操作",key:"action",fixed:"right"}}),[G,K]=tt({tip:"下载文件中..."});function U(n){return v(this,null,function*(){try{G();const i=yield ot(n.ossId);nt(i,n.originalName)}finally{K()}})}function q(n){return v(this,null,function*(){yield L([n.ossId]),yield I()})}const Z=Q();function H(){Z("/system/oss-config/index")}return(n,i)=>{const g=mt("a-button"),x=ut("auth");return r(),p(a(X),{dense:""},{default:s(()=>[c(a(T),{onRegister:a(V)},{toolbar:s(()=>[c(a(lt),null,{default:s(()=>[c(a(S),{title:"预览图片"},{default:s(()=>[c(a(rt),{checked:o.value,"onUpdate:checked":i[0]||(i[0]=u=>o.value=u)},null,8,["checked"])]),_:1}),h((r(),p(g,{onClick:H},{default:s(()=>[C("配置管理")]),_:1})),[[x,"system:ossConfig:list"]]),h((r(),p(g,{class:"<sm:hidden",type:"primary",danger:"",onClick:i[1]||(i[1]=u=>a(W)(a(L))),disabled:!a($)},{default:s(()=>[C("删除")]),_:1},8,["disabled"])),[[x,"system:oss:remove"]]),h(c(N,z({class:"<sm:hidden"},A,{onReload:a(I)}),null,16,["onReload"]),[[x,"system:oss:upload"]]),h(c(N,z(w,{onReload:a(I)}),null,16,["onReload"]),[[x,"system:oss:upload"]])]),_:1})]),bodyCell:s(({column:u,record:l})=>[u.dataIndex==="url"?(r(),ft(gt,{key:0},[o.value&&O(l.url)?(r(),p(a(b),{key:0,imgList:[l.url],size:50,simpleShow:""},null,8,["imgList"])):(r(),p(a(S),{key:1,title:l.url},{default:s(()=>[C(xt(l.url),1)]),_:2},1032,["title"]))],64)):B("",!0),u.key==="action"?(r(),p(a(M),{key:1,stopButtonPropagation:"",actions:[{label:"下载",icon:a(R).DOWNLOAD,type:"primary",ghost:!0,auth:"system:oss:download",onClick:U.bind(null,l)},{label:"删除",icon:a(R).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:oss:remove",popConfirm:{placement:"left",title:`是否删除文件[${l.fileName}]?`,confirm:q.bind(null,l)}}]},null,8,["actions"])):B("",!0)]),_:1},8,["onRegister"])]),_:1})}}});export{Qt as default};
