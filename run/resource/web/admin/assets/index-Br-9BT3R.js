var k=(v,_,t)=>new Promise((y,m)=>{var h=o=>{try{r(t.next(o))}catch(s){m(s)}},l=o=>{try{r(t.throw(o))}catch(s){m(s)}},r=o=>o.done?y(o.value):Promise.resolve(o.value).then(h,l);r((t=t.apply(v,_)).next())});import{P as D}from"./index-C4nZBquz.js";import{u as E,_ as M}from"./useTable-CNbfTOCZ.js";import{_ as Y}from"./index-DCvxWw7W.js";import{d as I,e as $,f as w,g as N}from"./index-BaTIRAV6.js";import{f as P,c as S,_ as B}from"./ConfigModal.vue_vue_type_script_setup_true_lang-De9do_Qe.js";import{u as V}from"./index-BIkrAlj7.js";import{b as L}from"./download-DOz9ltI1.js";import{I as R}from"./entry/index-BbJQUQ84-1718268303552.js";import{aa as W}from"./antd-DMGzOvrA.js";import{d as q,a7 as A,n as F,Z as i,a8 as n,a9 as a,k as x,u as e,m as u,G as g,ab as G}from"./vue-Cw15aJ-2.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./useRender-D1Q3fAQ3.js";import"./index-Dx0uas1b.js";import"./dict-vVDMuEaq.js";import"./dictEnum-DeC8h6ZR.js";import"./useLoading-D1in2ACg.js";const be=q({name:"Config",__name:"index",setup(v){const[_,{reload:t,multipleRemove:y,selected:m}]=E({rowSelection:{type:"checkbox"},title:"参数列表",showIndexColumn:!1,api:I,rowKey:"configId",useSearchForm:!0,formConfig:{schemas:P,labelWidth:80,name:"config",baseColProps:{xs:24,sm:24,md:24,lg:6},fieldMapToTime:[["createTime",["params[beginTime]","params[endTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},columns:S,actionColumn:{width:200,title:"操作",key:"action",fixed:"right"}}),[h,{openModal:l}]=V();function r(){return k(this,null,function*(){yield N(),yield t()})}function o(p){l(!0,{record:p,update:!0})}function s(){l(!0,{update:!1})}function T(p){return k(this,null,function*(){yield w([p.configId]),yield t()})}return(p,c)=>{const d=A("a-button"),f=F("auth");return i(),n(e(D),{dense:""},{default:a(()=>[x(e(M),{onRegister:e(_)},{toolbar:a(()=>[x(e(W),null,{default:a(()=>[u((i(),n(d,{onClick:r},{default:a(()=>[g("刷新缓存")]),_:1})),[[f,"system:config:query"]]),u((i(),n(d,{class:"<sm:hidden",onClick:c[0]||(c[0]=b=>e(L)(e($),"参数数据"))},{default:a(()=>[g("导出")]),_:1})),[[f,"system:config:export"]]),u((i(),n(d,{class:"<sm:hidden",type:"primary",danger:"",onClick:c[1]||(c[1]=b=>e(y)(e(w))),disabled:!e(m)},{default:a(()=>[g("删除")]),_:1},8,["disabled"])),[[f,"system:config:remove"]]),u((i(),n(d,{type:"primary",onClick:s},{default:a(()=>[g("新增")]),_:1})),[[f,"system:config:add"]])]),_:1})]),bodyCell:a(({column:b,record:C})=>[b.key==="action"?(i(),n(e(Y),{key:0,stopButtonPropagation:"",actions:[{label:"修改",icon:e(R).EDIT,type:"primary",ghost:!0,auth:"system:config:edit",onClick:o.bind(null,C)},{label:"删除",icon:e(R).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:config:remove",popConfirm:{placement:"left",title:`是否删除[${C.configName}]?`,confirm:T.bind(null,C)}}]},null,8,["actions"])):G("",!0)]),_:1},8,["onRegister"]),x(B,{onRegister:e(h),onReload:e(t)},null,8,["onRegister","onReload"])]),_:1})}}});export{be as default};
