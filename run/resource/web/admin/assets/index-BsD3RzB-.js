var p=(d,I,n)=>new Promise((m,t)=>{var h=r=>{try{u(n.next(r))}catch(c){t(c)}},x=r=>{try{u(n.throw(r))}catch(c){t(c)}},u=r=>r.done?m(r.value):Promise.resolve(r.value).then(h,x);u((n=n.apply(d,I)).next())});import{a as V,B as A}from"./index-BIkrAlj7.js";import{_ as K}from"./index-BcLdq1Bd.js";import{d as P,u as U}from"./index-Bys7JeoU.js";import{u as E,_ as O}from"./useTable-CNbfTOCZ.js";import"./index-DCvxWw7W.js";import{D as $}from"./dictEnum-DeC8h6ZR.js";import{u as z}from"./useRender-D1Q3fAQ3.js";import{bj as j,l as q}from"./entry/index-BbJQUQ84-1718268303552.js";import{as as _,y as G,A as W,U as b,ar as Z}from"./antd-DMGzOvrA.js";import{d as H,f as w,r as J,o as Q,Z as l,a8 as f,a9 as o,k as g,u as e,ac as S,ab as v,ak as X,al as Y,_ as D,aa as ee,G as te,a0 as ae,F as R}from"./vue-Cw15aJ-2.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./index-Dx0uas1b.js";import"./dict-vVDMuEaq.js";const{renderDict:re}=z(),se=[{dataIndex:"userName",title:"名称"},{dataIndex:"nickName",title:"昵称"},{dataIndex:"avatar",title:"头像",width:80},{dataIndex:"deptName",title:"部门"},{dataIndex:"phonenumber",title:"手机号"},{dataIndex:"status",title:"状态",customRender({value:d}){return re(d,$.NORMAL_DISABLE)}},{dataIndex:"createTime",title:"创建时间"}],oe=[{field:"userName",label:"用户账号",component:"Input"},{field:"phonenumber",label:"手机号码",component:"Input"}],le=H({name:"UserSelectModal",__name:"index",props:{multiple:{type:Boolean,required:!1,default:!0}},emits:["register","selectDone"],setup(d,{emit:I}){const n=d,m=w(""),t=J({tree:[],selectDeptId:[]}),h=w(!0);function x(){return p(this,null,function*(){yield r()})}Q(()=>p(this,null,function*(){const a=yield P();j(a,i=>{i.icon="el:group"}),t.tree=a,h.value=!1}));const[u,{reload:r,getSelectRows:c,setSelectedRows:C,setSelectedRowKeys:T}]=E({rowSelection:{type:n.multiple?"checkbox":"radio"},showSelectionBar:!0,clickToRowSelect:!0,clearSelectOnPageChange:!1,showIndexColumn:!1,size:"small",api:U,rowKey:"userId",useSearchForm:!0,formConfig:{schemas:oe,name:"user",baseColProps:{xs:24,sm:24,md:24,lg:8},labelWidth:80,resetFunc:()=>p(this,null,function*(){t.selectDeptId=[],m.value="",yield r()})},columns:se,beforeFetch(a){return t.selectDeptId.length===1&&(a.deptId=t.selectDeptId[0]),a}}),[N,{closeModal:M}]=V(B);function B(a){return p(this,null,function*(){a&&a.length&&T(a)})}const F=I;function L(){F("selectDone",c()),M(),y()}function y(){C([])}return(a,i)=>(l(),f(e(A),S(a.$attrs,{title:"用户选择",defaultFullscreen:"",canFullscreen:!1,onRegister:e(N),onOk:L,onCancel:y}),{default:o(()=>[g(e(Z),null,{default:o(()=>[g(e(_),S({xs:24,sm:24,md:24,lg:4},{class:"h-[calc(100vh-80px)]"}),{default:o(()=>[g(e(G),{active:!0,paragraph:{rows:8},loading:h.value},{default:o(()=>[t.tree.length?(l(),f(e(K),{key:0,fieldNames:{title:"label",key:"id"},"tree-data":t.tree,showLine:{showLeafIcon:!1},search:!0,searchValue:m.value,"onUpdate:searchValue":i[0]||(i[0]=s=>m.value=s),defaultExpandAll:"",onSelect:x,selectedKeys:t.selectDeptId,"onUpdate:selectedKeys":i[1]||(i[1]=s=>t.selectDeptId=s)},null,8,["tree-data","searchValue","selectedKeys"])):v("",!0)]),_:1},8,["loading"])]),_:1},16),g(e(_),X(Y({xs:24,sm:24,md:24,lg:20})),{default:o(()=>[g(e(O),{onRegister:e(u)},{tableTitle:o(()=>[(l(!0),D(R,null,ee(e(c)(),s=>(l(),f(e(W),{key:s.userId},{default:o(()=>[te(ae(s.nickName),1)]),_:2},1024))),128))]),bodyCell:o(({column:s,record:k})=>[s&&k&&s.dataIndex==="avatar"?(l(),D(R,{key:0},[k.avatar?(l(),f(e(b),{key:0,src:k.avatar},null,8,["src"])):(l(),f(e(b),{key:1,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))],64)):v("",!0)]),_:1},8,["onRegister"])]),_:1},16)]),_:1})]),_:1},16,["onRegister"]))}}),Le=q(le,[["__scopeId","data-v-69878c55"]]);export{Le as default};
