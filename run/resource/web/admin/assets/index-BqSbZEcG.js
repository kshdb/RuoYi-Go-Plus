var p=(b,d,n)=>new Promise((f,l)=>{var _=t=>{try{a(n.next(t))}catch(s){l(s)}},m=t=>{try{a(n.throw(t))}catch(s){l(s)}},a=t=>t.done?f(t.value):Promise.resolve(t.value).then(_,m);a((n=n.apply(b,d)).next())});import{P as I}from"./index-DrfqwNLV.js";import{u as v,_ as M}from"./useTable-BlleqRm-.js";import{_ as R}from"./index-Rv_3g2e8.js";import{w as h,a as D,_ as E,t as N}from"./SendMsgModal.vue_vue_type_script_setup_true_lang-Bj9b5omc.js";import{aa as T,I as x,h as $}from"./entry/index-CMepwc5X-1716790511191.js";import{u as B}from"./index-CMSTH4sS.js";import{d as K,f as P,o as S,aa as V,_ as g,a8 as w,a9 as r,k as u,u as o,G as y,ac as A}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./antd-BRjMhd0C.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";const le=K({__name:"index",setup(b){function d(){return p(this,null,function*(){const e=yield N("xxxxxxx");console.log(e)})}const[n,{reload:f}]=v({showIndexColumn:!0,api:h,title:"websocket测试",rowKey:"id",columns:[{title:"用户ID",dataIndex:"userId"},{title:"用户账号",dataIndex:"username"},{title:"用户昵称",dataIndex:"nickname"},{title:"用户部门",dataIndex:"deptName"}],actionColumn:{width:220,title:"操作",key:"action",fixed:"right"}}),[l,{openModal:_}]=B();function m(i,e){return p(this,null,function*(){const c={type:i,nickname:e==null?void 0:e.nickname,sessionKey:e==null?void 0:e.userId};_(!0,c)})}const a=P(!0),{websocketEnable:t}=T(),{createMessage:s}=$();return S(()=>p(this,null,function*(){const i=yield D();a.value=t==="true"&&i,a.value||s.warn({content:"未开启websocket功能"})})),(i,e)=>{const c=V("a-button");return g(),w(o(I),{title:"websocket测试",content:"这这里可以进行websocket测试 非官方功能"},{default:r(()=>[u(o(M),{onRegister:o(n)},{toolbar:r(()=>[u(c,{"pre-icon":o(x).ADD,type:"primary",onClick:e[0]||(e[0]=k=>m(0)),disabled:!a.value},{default:r(()=>[y(" 发送全体消息 ")]),_:1},8,["pre-icon","disabled"]),u(c,{onClick:d},{default:r(()=>[y("请求加密/响应解密测试 NETWORK查看")]),_:1})]),bodyCell:r(({column:k,record:C})=>[k.key==="action"?(g(),w(o(R),{key:0,stopButtonPropagation:"",actions:[{label:"发送消息",icon:o(x).ADD,type:"primary",ghost:!0,disabled:!a.value,onClick:m.bind(null,1,C)}]},null,8,["actions"])):A("",!0)]),_:1},8,["onRegister"]),u(E,{onRegister:o(l),onReload:o(f)},null,8,["onRegister","onReload"])]),_:1})}}});export{le as default};
