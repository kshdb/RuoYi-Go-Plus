var _=(V,f,n)=>new Promise((b,c)=>{var h=a=>{try{l(n.next(a))}catch(p){c(p)}},v=a=>{try{l(n.throw(a))}catch(p){c(p)}},l=a=>a.done?b(a.value):Promise.resolve(a.value).then(h,v);l((n=n.apply(V,f)).next())});import{P as C}from"./index-DrfqwNLV.js";import{u as k,_ as E}from"./useTable-BlleqRm-.js";import{_ as P}from"./index-Rv_3g2e8.js";import{l as T,f as D,c as R,e as $,r as g}from"./api-TODdotqz.js";import{b as B}from"./download-CYeVxFqw.js";import{c as q,I as d}from"./entry/index-CMepwc5X-1716790511191.js";import{c as A}from"./index-CU-vYa55.js";import{d as N,aa as G,n as L,_ as m,a8 as r,a9 as o,k as W,u as t,m as w,G as y,ac as z}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./antd-BRjMhd0C.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./index-CMSTH4sS.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./useRender-C6p2srTi.js";import"./index-BhefpKLc.js";import"./dict-C9gNHjAh.js";import"./common-BAk3Wc0g.js";import"./useLoading-iCq4GOHr.js";const he=N({name:"Leave",__name:"index",setup(V){const[f,{reload:n,multipleRemove:b,selected:c}]=k({rowSelection:{type:"checkbox",getCheckboxProps:s=>({disabled:s.processInstanceVo.businessStatus==="invalid"||s.processInstanceVo.businessStatus==="finish"||s.processInstanceVo.businessStatus==="waiting"})},title:"请假列表",titleHelpMessage:["先到流程定义部署 [后端根目录/script/bpmn/模型.zip] 后再使用!","切换不同类型的流程(会签/普通)等, 到[流程定义-绑定业务]设置表名为[test_leave]"],api:T,showIndexColumn:!1,rowKey:"id",useSearchForm:!0,formConfig:{schemas:D,name:"leave",baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:R,actionColumn:{width:200,title:"操作",key:"action",fixed:"right"}});function h(s){a({path:"/demo/leaveEdit/index",query:{id:s.id,type:"update"}})}function v(){a({path:"/demo/leaveEdit/index",query:{type:"add"}})}function l(s){return _(this,null,function*(){yield g([s.id]),yield n()})}const a=q();function p(s){const i=s.id;a({path:"/demo/leaveEdit/index",query:{id:i,type:"preview"}})}function x(s){return _(this,null,function*(){yield A(s.processInstanceVo.id),yield n()})}return(s,i)=>{const I=G("a-button"),S=L("auth");return m(),r(t(C),{dense:""},{default:o(()=>[W(t(E),{onRegister:t(f)},{toolbar:o(()=>[w((m(),r(I,{class:"<sm:hidden",onClick:i[0]||(i[0]=u=>t(B)(t($),"请假信息"))},{default:o(()=>[y("导出")]),_:1})),[[S,"demo:leave:export"]]),w((m(),r(I,{class:"<sm:hidden",type:"primary",danger:"",onClick:i[1]||(i[1]=u=>t(b)(t(g))),disabled:!t(c)},{default:o(()=>[y("删除")]),_:1},8,["disabled"])),[[S,"demo:leave:remove"]]),w((m(),r(I,{type:"primary",onClick:v},{default:o(()=>[y("新增")]),_:1})),[[S,"demo:leave:add"]])]),bodyCell:o(({column:u,record:e})=>[u&&e&&u.key==="action"?(m(),r(t(P),{key:0,stopButtonPropagation:"",actions:[{label:"修改",icon:t(d).EDIT,auth:"demo:leave:edit",onClick:h.bind(null,e),ifShow:e.processInstanceVo.businessStatus!=="invalid"&&e.processInstanceVo.businessStatus!=="finish"&&e.processInstanceVo.businessStatus!=="waiting"&&e.processInstanceVo.businessStatus!=="termination"},{label:"审批记录",icon:t(d).PREVIEW,auth:"demo:leave:list",onClick:p.bind(null,e),ifShow:e.processInstanceVo.businessStatus!=="draft"&&e.processInstanceVo.businessStatus!=="cancel"&&e.processInstanceVo.businessStatus!=="back"},{label:"撤销",icon:t(d).EDIT,danger:!0,auth:"demo:leave:edit",ifShow:e.processInstanceVo.businessStatus==="waiting",popConfirm:{placement:"left",title:"是否撤销当前申请?",confirm:x.bind(null,e)}},{label:"删除",icon:t(d).DELETE,danger:!0,auth:"demo:leave:remove",ifShow:e.processInstanceVo.businessStatus!=="invalid"&&e.processInstanceVo.businessStatus!=="finish"&&e.processInstanceVo.businessStatus!=="waiting"&&e.processInstanceVo.businessStatus!=="termination",popConfirm:{placement:"left",title:`是否删除请假[${e.id}]?`,confirm:l.bind(null,e)}}]},null,8,["actions"])):z("",!0)]),_:1},8,["onRegister"])]),_:1})}}});export{he as default};
