var i=(b,m,t)=>new Promise((d,o)=>{var l=e=>{try{n(t.next(e))}catch(s){o(s)}},p=e=>{try{n(t.throw(e))}catch(s){o(s)}},n=e=>e.done?d(e.value):Promise.resolve(e.value).then(l,p);n((t=t.apply(b,m)).next())});import{u as I,_ as y}from"./useTable-BlleqRm-.js";import"./index-Rv_3g2e8.js";import{a as T,B as x}from"./index-CMSTH4sS.js";import{a as C,r as N,i as R}from"./index-CT23NofX.js";import{d as k,_ as M,a8 as F,a9 as B,k as K,u as c,ad as P}from"./vue-Bw3NQgLF.js";const z=k({name:"ImportTableModal",__name:"ImportTableModal",emits:["register","reload"],setup(b,{emit:m}){const t=m,[d,{modalLoading:o,closeModal:l}]=T(()=>i(this,null,function*(){yield s();const r=(yield C()).map(f=>({label:f,value:f}));yield u().updateSchema({field:"dataName",componentProps:{options:r}})})),p=[{title:"表名称",dataIndex:"tableName",align:"left"},{title:"表描述",dataIndex:"tableComment"},{title:"创建时间",dataIndex:"createTime"},{title:"更新时间",dataIndex:"updateTime"}],n=[{label:"数据源",field:"dataName",component:"Select",defaultValue:"master"},{label:"表名称",field:"tableName",component:"Input"},{label:"表描述",field:"tableComment",component:"Input"}],[e,{reload:s,getForm:u,getSelectRowKeys:w,clearSelectedRowKeys:h}]=I({rowSelection:{type:"checkbox"},clickToRowSelect:!0,canResize:!1,showIndexColumn:!1,showTableSetting:!1,api:N,rowKey:"tableName",useSearchForm:!0,formConfig:{labelWidth:60,schemas:n,baseColProps:{span:6}},columns:p,inset:!0});function S(){return i(this,null,function*(){try{const a=w();if(a.length===0){l();return}const{validate:r}=u();o(!0);const _=(yield r()).dataName;yield R(a.join(","),_),t("reload"),l(),yield g()}catch(a){}finally{o(!1)}})}function g(){return i(this,null,function*(){const{resetFields:a}=u();h(),yield a()})}return(a,r)=>(M(),F(c(x),P(a.$attrs,{title:"导入表",width:900,onRegister:c(d),onOk:S,onCancel:g}),{default:B(()=>[K(c(y),{onRegister:c(e)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{z as _};
