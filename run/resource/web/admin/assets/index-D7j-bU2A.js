var v=(x,h,o)=>new Promise((b,l)=>{var g=t=>{try{s(o.next(t))}catch(r){l(r)}},p=t=>{try{s(o.throw(t))}catch(r){l(r)}},s=t=>t.done?b(t.value):Promise.resolve(t.value).then(g,p);s((o=o.apply(x,h)).next())});import{P as R}from"./index-DrfqwNLV.js";import{u as T,_ as V}from"./useTable-BlleqRm-.js";import{_ as S}from"./index-Rv_3g2e8.js";import{T as B}from"./TableSwitch-CXPFPejB.js";import{d as I,f as P,e as K,g as E,h as N,i as U}from"./client.data-C7_aKPac.js";import{b as L}from"./download-CYeVxFqw.js";import{aU as A,I as $}from"./entry/index-CMepwc5X-1716790511191.js";import{_ as F}from"./ClientDrawer.vue_vue_type_script_setup_true_lang-BLMh8lr7.js";import{u as G}from"./index-ov0mgIjt.js";import{ad as W}from"./antd-BRjMhd0C.js";import{d as j,aa as q,n as z,_ as n,a8 as m,a9 as i,k as _,u as e,m as y,$ as H,G as w,ac as D}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./index-CMSTH4sS.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./dictEnum-DeC8h6ZR.js";import"./dict-C9gNHjAh.js";import"./useRender-C6p2srTi.js";import"./index-BhefpKLc.js";import"./useLoading-iCq4GOHr.js";import"./useSize-tRF5RUOv.js";const J={class:"<sm:hidden"},Ee=j({name:"Client",__name:"index",setup(x){const[h,{reload:o,multipleRemove:b,selected:l}]=T({rowSelection:{type:"checkbox"},api:I,title:"客户端列表",showIndexColumn:!1,rowKey:"id",useSearchForm:!0,formConfig:{schemas:P,name:"client",baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:K,actionColumn:{width:200,title:"操作",key:"action",fixed:"right"}}),[g,{openDrawer:p}]=G();function s(d){p(!0,{record:d,update:!0})}function t(){p(!0,{update:!1})}function r(d){return v(this,null,function*(){yield U([d.id]),yield o()})}return(d,u)=>{const k=q("a-button"),c=z("auth");return n(),m(e(R),{dense:""},{default:i(()=>[_(e(V),{onRegister:e(h)},{toolbar:i(()=>[_(e(W),null,{default:i(()=>[y((n(),H("div",J,[_(e(A),{placement:"left",title:"确认导出表格吗?",onConfirm:u[0]||(u[0]=f=>e(L)(e(E),"客户端信息"))},{default:i(()=>[w("导出")]),_:1})])),[[c,"system:user:export"]]),y((n(),m(k,{class:"<sm:hidden",type:"primary",danger:"",disabled:!e(l),onClick:u[1]||(u[1]=f=>e(b)(e(E)))},{default:i(()=>[w("删除")]),_:1},8,["disabled"])),[[c,"system:client:remove"]]),y((n(),m(k,{type:"primary",onClick:t},{default:i(()=>[w("新增")]),_:1})),[[c,"system:client:add"]])]),_:1})]),bodyCell:i(({column:f,record:a})=>[f.dataIndex==="status"?y((n(),m(e(B),{key:0,modelValue:a.status,"onUpdate:modelValue":C=>a.status=C,disabled:a.id===1,api:()=>e(N)(a),"custom-content":C=>`确认${C}客户端[${a.clientKey}]吗?`,reload:e(o)},null,8,["modelValue","onUpdate:modelValue","disabled","api","custom-content","reload"])),[[c,"system:client:edit"]]):D("",!0),f.key==="action"?(n(),m(e(S),{key:1,stopButtonPropagation:"",actions:[{label:"修改",icon:e($).EDIT,type:"primary",ghost:!0,auth:"system:client:edit",onClick:s.bind(null,a)},{label:"删除",icon:e($).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:client:remove",popConfirm:{placement:"left",title:`是否删除客户端[${a.clientKey}]?`,confirm:r.bind(null,a)}}]},null,8,["actions"])):D("",!0)]),_:1},8,["onRegister"]),_(F,{onRegister:e(g),onReload:e(o)},null,8,["onRegister","onReload"])]),_:1})}}});export{Ee as default};
