var m=(u,l,o)=>new Promise((s,r)=>{var p=t=>{try{e(o.next(t))}catch(i){r(i)}},c=t=>{try{e(o.throw(t))}catch(i){r(i)}},e=t=>t.done?s(t.value):Promise.resolve(t.value).then(p,c);e((o=o.apply(u,l)).next())});import{a as M,B as y}from"./index-CMSTH4sS.js";import{u as B,_ as C}from"./useForm-uR1ZVBCA.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./componentMap-DPcekmXH.js";import{m as S}from"./tenant.data-CZp0Drjb.js";import{t as F,a as I,b as R}from"./index-BJYj7OZt.js";import{p as T}from"./index-De2oYrBu.js";import{bD as N}from"./entry/index-CMepwc5X-1716790511191.js";import{d as P,f as x,c as A,_ as L,a8 as O,a9 as U,k as V,u as n,ad as $}from"./vue-Bw3NQgLF.js";import"./antd-BRjMhd0C.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./helper-CfJJkrf5.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./index-Rv_3g2e8.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./rules-Boel_RXz.js";const ma=P({name:"TenantModal",__name:"TenantModal",emits:["register","reload"],setup(u,{emit:l}){const o=l,s=x(!1),r=A(()=>s.value?"编辑租户":"新增租户"),[p,{closeModal:c,modalLoading:e}]=M(a=>m(this,null,function*(){e(!0);const{record:d,update:g}=a;if(s.value=g,g&&d){const v=yield F(d.id);yield _(v)}yield t(),e(!1)}));function t(){return m(this,null,function*(){const a=yield T();yield h({field:"packageId",componentProps:{fieldNames:{label:"packageName",value:"packageId"},options:a,disabled:s.value}})})}const[i,{setFieldsValue:_,validate:w,resetForm:f,updateSchema:h}]=B({labelWidth:80,name:"tenant_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:S}),{initTenant:k}=N();function b(){return m(this,null,function*(){try{e(!0);const a=yield w();n(s)?yield I(a):yield R(a),yield k(),f(),o("reload",c)}catch(a){console.log(a)}finally{e(!1)}})}return(a,d)=>(L(),O(n(y),$(a.$attrs,{title:r.value,width:600,onRegister:n(p),onOk:b,onCancel:n(f)}),{default:U(()=>[V(n(C),{onRegister:n(i)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{ma as default};
