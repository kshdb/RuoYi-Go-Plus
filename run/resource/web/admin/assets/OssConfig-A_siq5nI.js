var x=(k,f,s)=>new Promise((c,p)=>{var d=e=>{try{n(s.next(e))}catch(r){p(r)}},u=e=>{try{n(s.throw(e))}catch(r){p(r)}},n=e=>e.done?c(e.value):Promise.resolve(e.value).then(d,u);n((s=s.apply(k,f)).next())});import{P as V}from"./index-DrfqwNLV.js";import{u as $,_ as E}from"./useTable-BlleqRm-.js";import{_ as S}from"./index-Rv_3g2e8.js";import{T as P}from"./TableSwitch-CXPFPejB.js";import{o as D,a as B,b as K}from"./config-D-gR7Hbj.js";import{f as N,c as U}from"./oss.config.data-ClMoaZdf.js";import{I as R}from"./entry/index-CMepwc5X-1716790511191.js";import{u as F}from"./index-ov0mgIjt.js";import{_ as L}from"./OssConfigDrawer.vue_vue_type_script_setup_true_lang-CkOowwAN.js";import{d as O,aa as W,n as A,_ as m,a8 as l,a9 as i,k as h,G as b,m as w,u as o,ac as T}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./antd-BRjMhd0C.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./index-CMSTH4sS.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./useRender-C6p2srTi.js";import"./index-BhefpKLc.js";import"./dict-C9gNHjAh.js";import"./dictEnum-DeC8h6ZR.js";import"./useSize-tRF5RUOv.js";const ko=O({name:"OssConfig",__name:"OssConfig",setup(k){const[f,{reload:s,multipleRemove:c,selected:p}]=$({rowSelection:{type:"checkbox"},title:"oss配置列表",showIndexColumn:!1,api:K,rowKey:"ossConfigId",useSearchForm:!0,beforeFetch:t=>(t.status&&(t.status=t.status==="Y"?0:1),t),formConfig:{schemas:N,labelWidth:80,name:"oss_config",baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:U,actionColumn:{width:160,title:"操作",key:"action",fixed:"right"}}),[d,{openDrawer:u}]=F();function n(t){u(!0,{record:t,update:!0})}function e(){u(!0,{update:!1})}function r(t){return x(this,null,function*(){yield D([t.ossConfigId]),yield s()})}function I(){window.open("https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/basic/oss")}return(t,v)=>{const g=W("a-button"),C=A("auth");return m(),l(o(V),{dense:""},{default:i(()=>[h(o(E),{onRegister:o(f)},{toolbar:i(()=>[h(g,{class:"font-bold",type:"link",onClick:I},{default:i(()=>[b("oss文档")]),_:1}),w((m(),l(g,{type:"primary",danger:"",onClick:v[0]||(v[0]=_=>o(c)(o(D))),disabled:!o(p)},{default:i(()=>[b("删除")]),_:1},8,["disabled"])),[[C,"system:ossConfig:remove"]]),w((m(),l(g,{type:"primary",onClick:e},{default:i(()=>[b("新增")]),_:1})),[[C,"system:ossConfig:add"]])]),bodyCell:i(({column:_,record:a})=>[_.dataIndex==="status"?w((m(),l(o(P),{key:0,modelValue:a.status,"onUpdate:modelValue":y=>a.status=y,api:()=>o(B)(a),"custom-content":y=>`确定要[${y}][${a.configKey}]配置吗?`,reload:o(s)},null,8,["modelValue","onUpdate:modelValue","api","custom-content","reload"])),[[C,"system:ossConfig:edit"]]):T("",!0),_.key==="action"?(m(),l(o(S),{key:1,stopButtonPropagation:"",actions:[{label:"修改",icon:o(R).EDIT,type:"primary",ghost:!0,auth:"system:ossConfig:edit",onClick:n.bind(null,a)},{label:"删除",icon:o(R).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:ossConfig:remove",popConfirm:{placement:"left",title:`是否删除oss配置[${a.configKey}]?`,confirm:r.bind(null,a)}}]},null,8,["actions"])):T("",!0)]),_:1},8,["onRegister"]),h(L,{onRegister:o(d),onReload:o(s)},null,8,["onRegister","onReload"])]),_:1})}}});export{ko as default};
