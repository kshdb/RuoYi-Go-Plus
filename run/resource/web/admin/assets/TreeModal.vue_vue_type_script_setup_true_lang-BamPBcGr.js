var p=(e,m,r)=>new Promise((i,c)=>{var f=t=>{try{d(r.next(t))}catch(l){c(l)}},n=t=>{try{d(r.throw(t))}catch(l){c(l)}},d=t=>t.done?i(t.value):Promise.resolve(t.value).then(f,n);d((r=r.apply(e,m)).next())});import{a as x,B as v}from"./index-CMSTH4sS.js";import{u as N,_ as S}from"./useForm-uR1ZVBCA.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./componentMap-DPcekmXH.js";import{aw as u,bp as T}from"./entry/index-CMepwc5X-1716790511191.js";import{d as q,f as y,c as B,_ as C,a8 as R,a9 as k,k as F,u as o,ad as L}from"./vue-Bw3NQgLF.js";function W(e){return u.get({url:"/demo/tree/list",params:e})}function A(e){return u.get({url:"/demo/tree/"+e})}function D(e){return u.postWithMsg({url:"/demo/tree",data:e})}function P(e){return u.putWithMsg({url:"/demo/tree",data:e})}function z(e){return u.deleteWithMsg({url:"/demo/tree/"+e})}const J=[{label:"父id",field:"parentId",component:"Input"},{label:"部门id",field:"deptId",component:"Input"},{label:"用户id",field:"userId",component:"Input"},{label:"值",field:"treeName",component:"Input"}],K=[{title:"主键",dataIndex:"id"},{title:"父id",dataIndex:"parentId"},{title:"部门id",dataIndex:"deptId"},{title:"用户id",dataIndex:"userId"},{title:"值",dataIndex:"treeName"}],U=[{label:"主键",field:"id",required:!0,component:"Input",show:!1},{label:"父id",field:"parentId",required:!0,component:"TreeSelect"},{label:"部门id",field:"deptId",required:!0,component:"Input"},{label:"用户id",field:"userId",required:!0,component:"Input"},{label:"值",field:"treeName",required:!0,component:"Input"}],Q=q({name:"TreeModal",__name:"TreeModal",emits:["register","reload"],setup(e,{emit:m}){const r=m,i=y(!1),c=B(()=>i.value?"编辑测试树":"新增测试树"),[f,{modalLoading:n,closeModal:d}]=x(a=>p(this,null,function*(){n(!0);const{record:s,update:h}=a;if(i.value=h,h&&s){const M=yield A(s.id);yield b(M)}yield t(),n(!1)}));function t(){return p(this,null,function*(){const a=yield W(),s=T(a,{id:"id",pid:"parentId"});yield w({field:"parentId",componentProps:{treeData:s,treeLine:{showLeafIcon:!1},fieldNames:{label:"treeName",value:"treeId"},treeDefaultExpandAll:!0}})})}const[l,{setFieldsValue:b,resetForm:I,validate:g,updateSchema:w}]=N({labelWidth:100,showActionButtonGroup:!1,baseColProps:{span:24},schemas:U});function _(){return p(this,null,function*(){try{n(!0);const a=yield g();o(i)?yield P(a):yield D(a),r("reload"),d(),yield I()}catch(a){}finally{n(!1)}})}return(a,s)=>(C(),R(o(v),L(a.$attrs,{title:c.value,onRegister:o(f),onOk:_,onCancel:o(I)}),{default:k(()=>[F(o(S),{onRegister:o(l)},null,8,["onRegister"])]),_:1},16,["title","onRegister","onCancel"]))}});export{Q as _,z as a,K as c,J as f,W as t};
