var n=(l,i,r)=>new Promise((m,a)=>{var f=e=>{try{s(r.next(e))}catch(c){a(c)}},t=e=>{try{s(r.throw(e))}catch(c){a(c)}},s=e=>e.done?m(e.value):Promise.resolve(e.value).then(f,t);s((r=r.apply(l,i)).next())});import{P as _}from"./index-DrfqwNLV.js";import{u as w,_ as g}from"./useForm-uR1ZVBCA.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./componentMap-DPcekmXH.js";import{a as P,h as d,j as h}from"./entry/index-CMepwc5X-1716790511191.js";import{c as x}from"./index-aumlwiLG.js";import{d as b,_ as y,a8 as S,a9 as p,k as u,u as o}from"./vue-Bw3NQgLF.js";import{au as C,at as j}from"./antd-BRjMhd0C.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./helper-CfJJkrf5.js";import"./index-CMSTH4sS.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./index-Rv_3g2e8.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./copyTextToClipboard-BLtSw0o7.js";const k=b({__name:"SecureSetting",setup(l){const i=P(),{createSuccessModal:r}=d(),[m,{validate:a}]=w({labelWidth:100,rulesMessageJoinLabel:!0,actionColOptions:{span:24},submitButtonOptions:{text:"确认修改密码"},baseColProps:{span:24},schemas:[{field:"oldPassword",label:"旧密码",component:"InputPassword",rules:[{required:!0,message:"请输入旧密码, 长度在 5 到 20 个字符",min:5,max:20}]},{field:"newPassword",label:"新密码",component:"StrengthMeter",componentProps:{placeholder:"请输入新密码, 长度在 5 到 20 个字符"},rules:[{required:!0,message:"请输入新密码, 长度在 5 到 20 个字符",min:5,max:20}]},{field:"confirmPassword",label:"确认密码",component:"InputPassword",dynamicRules:({values:t})=>[{required:!0,validator:(s,e)=>e?e!==t.newPassword?Promise.reject("两次输入的密码不一致!"):Promise.resolve():Promise.reject("密码不能为空")}]}],submitFunc(){return n(this,null,function*(){try{const t=yield a();d().createConfirm({iconType:"warning",title:"提示",content:"是否确认修改密码?",onOk:()=>n(this,null,function*(){try{yield x(t),r({title:"提示",content:"密码修改成功, 请重新登录!"}),setTimeout(()=>n(this,null,function*(){yield i.logout(!0)}),1500)}catch(s){}})})}catch(t){}})}});return(t,s)=>(y(),S(o(_),null,{default:p(()=>[u(o(j),{clsss:"flex justify-center"},{default:p(()=>[u(o(C),{xs:24,sm:24,md:24,lg:8},{default:p(()=>[u(o(g),{onRegister:o(m),class:"mr-10"},null,8,["onRegister"])]),_:1})]),_:1})]),_:1}))}}),H=h(k,[["__scopeId","data-v-565777a2"]]);export{H as default};
