var f=(b,d,t)=>new Promise((h,y)=>{var g=r=>{try{c(t.next(r))}catch(u){y(u)}},m=r=>{try{c(t.throw(r))}catch(u){y(u)}},c=r=>r.done?h(r.value):Promise.resolve(r.value).then(g,m);c((t=t.apply(b,d)).next())});import{P as $}from"./index-C4nZBquz.js";import{_ as N}from"./index-BcLdq1Bd.js";import{c as B,d as V,e as k}from"./index-DGT8hE2-.js";import{d as L}from"./index-Bys7JeoU.js";import{u as K,_ as A}from"./useTable-CNbfTOCZ.js";import{_ as F}from"./index-DCvxWw7W.js";import{bj as U,aR as G,I as C,l as W}from"./entry/index-BbJQUQ84-1718268303552.js";import{b as j}from"./download-DOz9ltI1.js";import{f as z,c as Z}from"./post.data-tw5vigc8.js";import{_ as q}from"./PostDrawer.vue_vue_type_script_setup_true_lang-B9oV7ny9.js";import{u as H}from"./index-BLDmWVyR.js";import{ar as J,as as E,y as O,ax as T,aa as Q}from"./antd-DMGzOvrA.js";import{d as X,f as S,r as ee,o as te,a7 as ae,n as oe,Z as l,a8 as _,a9 as a,k as i,u as e,ac as se,_ as R,ak as re,al as ie,m as w,G as D,ab as ne}from"./vue-Cw15aJ-2.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./index-BIkrAlj7.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./useLoading-D1in2ACg.js";import"./dictEnum-DeC8h6ZR.js";import"./dict-vVDMuEaq.js";import"./useRender-D1Q3fAQ3.js";import"./index-Dx0uas1b.js";import"./useSize-CUNtmCvH.js";const le={key:1,class:"mt-5"},me=X({name:"User",__name:"index",setup(b){const d=S(""),t=ee({tree:[],selectDeptId:[]}),h=S(!0);function y(){return f(this,null,function*(){yield m()})}te(()=>f(this,null,function*(){const o=yield L();U(o,s=>{s.icon="el:group"}),t.tree=o,h.value=!1}));const[g,{reload:m,selected:c,multipleRemove:r}]=K({rowSelection:{type:"checkbox"},title:"岗位列表",showIndexColumn:!1,api:B,rowKey:"postId",useSearchForm:!0,formConfig:{schemas:z,name:"post",baseColProps:{xs:24,sm:24,md:24,lg:6},labelWidth:100,resetFunc:()=>f(this,null,function*(){t.selectDeptId=[],d.value="",yield m()}),fieldMapToTime:[["createTime",["params[beginTime]","params[endTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},columns:Z,beforeFetch(o){return t.selectDeptId.length===1&&(o.belongDeptId=t.selectDeptId[0]),o},actionColumn:{width:220,title:"操作",key:"action",fixed:"right"}}),[u,{openDrawer:x}]=H();function P(o){x(!0,{update:!0,record:o})}function M(){x(!0,{update:!1})}function Y(o){return f(this,null,function*(){yield k([o.postId]),yield m()})}return(o,s)=>{const I=ae("a-button"),v=oe("auth");return l(),_(e($),{dense:""},{default:a(()=>[i(e(J),null,{default:a(()=>[i(e(E),se({xs:24,sm:24,md:24,lg:4},{class:"h-[calc(100vh-80px)]"}),{default:a(()=>[i(e(O),{active:!0,paragraph:{rows:8},loading:h.value},{default:a(()=>[t.tree.length?(l(),_(e(N),{key:0,fieldNames:{title:"label",key:"id"},"tree-data":t.tree,showLine:{showLeafIcon:!1},search:!0,searchValue:d.value,"onUpdate:searchValue":s[0]||(s[0]=n=>d.value=n),defaultExpandAll:"",onSelect:y,selectedKeys:t.selectDeptId,"onUpdate:selectedKeys":s[1]||(s[1]=n=>t.selectDeptId=n)},null,8,["tree-data","searchValue","selectedKeys"])):(l(),R("div",le,[i(e(T),{image:e(T).PRESENTED_IMAGE_SIMPLE,description:"无部门数据"},null,8,["image"])]))]),_:1},8,["loading"])]),_:1},16),i(e(E),re(ie({xs:24,sm:24,md:24,lg:20})),{default:a(()=>[i(e(A),{onRegister:e(g)},{toolbar:a(()=>[i(e(Q),{class:"<sm:hidden"},{default:a(()=>[w((l(),R("div",null,[i(e(G),{placement:"left",title:"确认导出表格吗?",onConfirm:s[2]||(s[2]=n=>e(j)(e(V),"岗位数据"))},{default:a(()=>[D("导出")]),_:1})])),[[v,"system:post:export"]]),w((l(),_(I,{class:"<sm:hidden",type:"primary",danger:"",onClick:s[3]||(s[3]=n=>e(r)(e(k))),disabled:!e(c)},{default:a(()=>[D("删除")]),_:1},8,["disabled"])),[[v,"system:post:remove"]]),w((l(),_(I,{type:"primary",onClick:M},{default:a(()=>[D("新增")]),_:1})),[[v,"system:post:add"]])]),_:1})]),bodyCell:a(({column:n,record:p})=>[n.key==="action"?(l(),_(e(F),{key:0,stopButtonPropagation:"",dropDownBtnDisplay:"",actions:[{label:"修改",icon:e(C).EDIT,type:"primary",ghost:!0,auth:"system:user:edit",ifShow:p.userId!==1,onClick:P.bind(null,p)},{label:"删除",icon:e(C).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:user:remove",ifShow:p.userId!==1,popConfirm:{placement:"left",title:`是否删除用户[${p.userName}]-${p.nickName}?`,confirm:Y.bind(null,p)}}]},null,8,["actions"])):ne("",!0)]),_:1},8,["onRegister"])]),_:1},16)]),_:1}),i(q,{onRegister:e(u),onReload:e(m)},null,8,["onRegister","onReload"])]),_:1})}}}),We=W(me,[["__scopeId","data-v-9af6a592"]]);export{We as default};
