import{t as R,o as k,j as z}from"./entry/index-CMepwc5X-1716790511191.js";import{a as C}from"./useContentViewHeight-xBSq9xFC.js";import{F as E}from"./antd-BRjMhd0C.js";import{d as W,f as o,c as $,u as s,o as B,b as F,_ as I,$ as M,k as N,a9 as V,ah as p,a2 as g,a0 as b}from"./vue-Bw3NQgLF.js";import{u as j}from"./useWindowSizeFn-Ba6K9eqp.js";const D=["src"],T=W({__name:"index",props:{frameSrc:R.string.def("")},emits:["message"],setup(h,{expose:_,emit:v}){const w=v,a=o(!0),x=o(50),r=o(window.innerHeight),n=o(),{headerHeightRef:y}=C(),{prefixCls:c}=k("iframe-page");j(l,{wait:150,immediate:!0});const m=$(()=>({height:`${s(r)}px`}));function l(){const e=s(n);if(!e)return;const t=y.value;x.value=t,r.value=window.innerHeight-t;const i=document.documentElement.clientHeight-t;e.style.height=`${i}px`}function H(){a.value=!1,l()}const f=e=>{w("message",e.data)},S=(e,t,i)=>{var d;const u=s(n);u&&((d=u.contentWindow)==null||d.postMessage(e,t,i))},L=()=>{var t;a.value=!0;const e=n.value;e&&((t=e.contentWindow)==null||t.location.reload(),a.value=!1)};return B(()=>{window.addEventListener("message",f)}),F(()=>{window.removeEventListener("message",f)}),_({postMessage:S,reload:L}),(e,t)=>(I(),M("div",{class:g(s(c)),style:p(m.value)},[N(s(E),{spinning:a.value,size:"large",style:p(m.value)},{default:V(()=>[b("iframe",{src:h.frameSrc,class:g(`${s(c)}__main`),ref_key:"frameRef",ref:n,onLoad:H},null,42,D)]),_:1},8,["spinning","style"])],6))}}),K=z(T,[["__scopeId","data-v-745ce992"]]);export{K as I};
