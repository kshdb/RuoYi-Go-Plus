var xe=Object.defineProperty,Ce=Object.defineProperties;var _e=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var ee=(e,t,o)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,M=(e,t)=>{for(var o in t||(t={}))ke.call(t,o)&&ee(e,o,t[o]);if(U)for(var o of U(t))Pe.call(t,o)&&ee(e,o,t[o]);return e},O=(e,t)=>Ce(e,_e(t));var N=(e,t,o)=>new Promise((i,n)=>{var l=r=>{try{h(o.next(r))}catch(c){n(c)}},m=r=>{try{h(o.throw(r))}catch(c){n(c)}},h=r=>r.done?i(r.value):Promise.resolve(r.value).then(l,m);h((o=o.apply(e,t)).next())});import{P as Ee}from"./index-DrfqwNLV.js";import{u as Le,_ as $e}from"./useTable-BlleqRm-.js";import{_ as Be}from"./index-Rv_3g2e8.js";import{b as Se,c as De,I as z}from"./entry/index-CMepwc5X-1716790511191.js";import{u as Te}from"./useLoading-iCq4GOHr.js";import{d as te}from"./download-CYeVxFqw.js";import{u as oe}from"./index-CMSTH4sS.js";import{a as Me,b as Ae,c as ne,d as ie,s as Ie}from"./index-CT23NofX.js";import{_ as He}from"./ImportTableModal.vue_vue_type_script_setup_true_lang-youes-nq.js";import{_ as Re}from"./PreviewModal.vue_vue_type_script_setup_true_lang-ZYH3e0Pc.js";import{_ as Ne}from"./DocsDrawer.vue_vue_type_script_setup_true_lang-DZKDwC_l.js";import{u as We}from"./index-ov0mgIjt.js";import{O as Oe}from"./antd-BRjMhd0C.js";import{d as ze,o as Ye,aa as Fe,n as qe,_ as Y,a8 as F,a9 as I,k as W,u as C,G as q,m as Z,ac as Ge}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./index-BhefpKLc.js";import"./index-CwwL6bPg.js";import"./useSize-tRF5RUOv.js";const Ve=[{title:"表名称",dataIndex:"tableName"},{title:"表描述",dataIndex:"tableComment"},{title:"实体类",dataIndex:"className"},{title:"创建时间",dataIndex:"createTime"},{title:"更新时间",dataIndex:"updateTime"}],Ke=[{label:"数据源",field:"dataName",component:"Select",defaultValue:"",componentProps:{allowClear:!1}},{label:"表名称",field:"tableName",component:"Input"},{label:"表描述",field:"tableComment",component:"Input"},{label:"创建时间",field:"createTime",component:"RangePicker"}];let Q={};function J(e={}){Q=M({animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000"},e)}function a(e){return e?Q[e]:Q}function V(e,t,o,i){return(e/=i/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t}function pe(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(o=>{const i=o.matches(t),n=Array.from(o.querySelectorAll(t));return[...i?[o]:[],...n]}).filter(o=>getComputedStyle(o).pointerEvents!=="none"&&Ze(o))}function ce(e){if(!e||Xe(e))return;const t=a("smoothScroll");e.scrollIntoView({behavior:!t||je(e)?"auto":"smooth",inline:"center",block:"center"})}function je(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}function Xe(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Ze(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let j={};function E(e,t){j[e]=t}function d(e){return e?j[e]:j}function re(){j={}}let X={};function K(e,t){X[e]=t}function H(e){var t;(t=X[e])==null||t.call(X)}function Je(){X={}}function Qe(e,t,o,i){let n=d("__activeStagePosition");const l=n||o.getBoundingClientRect(),m=i.getBoundingClientRect(),h=V(e,l.x,m.x-l.x,t),r=V(e,l.y,m.y-l.y,t),c=V(e,l.width,m.width-l.width,t),s=V(e,l.height,m.height-l.height,t);n={x:h,y:r,width:c,height:s},ve(n),E("__activeStagePosition",n)}function ue(e){if(!e)return;const t=e.getBoundingClientRect(),o={x:t.x,y:t.y,width:t.width,height:t.height};E("__activeStagePosition",o),ve(o)}function Ue(){const e=d("__activeStagePosition"),t=d("__overlaySvg");if(!e)return;if(!t){console.warn("No stage svg found.");return}const o=window.innerWidth,i=window.innerHeight;t.setAttribute("viewBox",`0 0 ${o} ${i}`)}function et(e){const t=tt(e);document.body.appendChild(t),fe(t,o=>{o.target.tagName==="path"&&H("overlayClick")}),E("__overlaySvg",t)}function ve(e){const t=d("__overlaySvg");if(!t){et(e);return}const o=t.firstElementChild;if((o==null?void 0:o.tagName)!=="path")throw new Error("no path element found in stage svg");o.setAttribute("d",me(e))}function tt(e){const t=window.innerWidth,o=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${t} ${o}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",me(e)),n.style.fill=a("overlayColor")||"rgb(0,0,0)",n.style.opacity=`${a("overlayOpacity")}`,n.style.pointerEvents="auto",n.style.cursor="auto",i.appendChild(n),i}function me(e){const t=window.innerWidth,o=window.innerHeight,i=a("stagePadding")||0,n=a("stageRadius")||0,l=e.width+i*2,m=e.height+i*2,h=Math.min(n,l/2,m/2),r=Math.floor(Math.max(h,0)),c=e.x-i+r,s=e.y-i,p=l-r*2,u=m-r*2;return`M${t},0L0,0L0,${o}L${t},${o}L${t},0Z
    M${c},${s} h${p} a${r},${r} 0 0 1 ${r},${r} v${u} a${r},${r} 0 0 1 -${r},${r} h-${p} a${r},${r} 0 0 1 -${r},-${r} v-${u} a${r},${r} 0 0 1 ${r},-${r} z`}function ot(){const e=d("__overlaySvg");e&&e.remove()}function nt(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function se(e){const{element:t}=e;let o=typeof t=="string"?document.querySelector(t):t;o||(o=nt()),rt(o,e)}function it(){const e=d("__activeElement"),t=d("__activeStep");e&&(ue(e),Ue(),ge(e,t))}function rt(e,t){const o=Date.now(),i=d("__activeStep"),n=d("__activeElement")||e,l=!n||n===e,m=e.id==="driver-dummy-element",h=n.id==="driver-dummy-element",r=a("animate"),c=t.onHighlightStarted||a("onHighlightStarted"),s=(t==null?void 0:t.onHighlighted)||a("onHighlighted"),p=(i==null?void 0:i.onDeselected)||a("onDeselected"),u=a(),w=d();!l&&p&&p(h?void 0:n,i,{config:u,state:w}),c&&c(m?void 0:e,t,{config:u,state:w});const g=!l&&r;let f=!1;pt(),E("previousStep",i),E("previousElement",n),E("activeStep",t),E("activeElement",e);const v=()=>{if(d("__transitionCallback")!==v)return;const y=Date.now()-o,$=400-y<=400/2;t.popover&&$&&!f&&g&&(ae(e,t),f=!0),a("animate")&&y<400?Qe(y,400,n,e):(ue(e),s&&s(m?void 0:e,t,{config:a(),state:d()}),E("__transitionCallback",void 0),E("__previousStep",i),E("__previousElement",n),E("__activeStep",t),E("__activeElement",e)),window.requestAnimationFrame(v)};E("__transitionCallback",v),window.requestAnimationFrame(v),ce(e),!g&&t.popover&&ae(e,t),n.classList.remove("driver-active-element","driver-no-interaction"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-controls"),a("disableActiveInteraction")&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function st(){var e;(e=document.getElementById("driver-dummy-element"))==null||e.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function G(){const e=d("__resizeTimeout");e&&window.cancelAnimationFrame(e),E("__resizeTimeout",window.requestAnimationFrame(it))}function at(e){var t;if(!d("isInitialized")||!(e.key==="Tab"||e.keyCode===9))return;const o=d("__activeElement"),i=(t=d("popover"))==null?void 0:t.wrapper,n=pe([...i?[i]:[],...o?[o]:[]]),l=n[0],m=n[n.length-1];if(e.preventDefault(),e.shiftKey){const h=n[n.indexOf(document.activeElement)-1]||m;h==null||h.focus()}else{const h=n[n.indexOf(document.activeElement)+1]||l;h==null||h.focus()}}function he(e){var t;((t=a("allowKeyboardControl"))==null||t)&&(e.key==="Escape"?H("escapePress"):e.key==="ArrowRight"?H("arrowRightPress"):e.key==="ArrowLeft"&&H("arrowLeftPress"))}function fe(e,t,o){const i=(n,l)=>{const m=n.target;e.contains(m)&&((!o||o(m))&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()),l==null||l(n))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",n=>{i(n,t)},!0)}function lt(){window.addEventListener("keyup",he,!1),window.addEventListener("keydown",at,!1),window.addEventListener("resize",G),window.addEventListener("scroll",G)}function dt(){window.removeEventListener("keyup",he),window.removeEventListener("resize",G),window.removeEventListener("scroll",G)}function pt(){const e=d("popover");e&&(e.wrapper.style.display="none")}function ae(e,t){var o,i;let n=d("popover");n&&document.body.removeChild(n.wrapper),n=ut(),document.body.appendChild(n.wrapper);const{title:l,description:m,showButtons:h,disableButtons:r,showProgress:c,nextBtnText:s=a("nextBtnText")||"Next &rarr;",prevBtnText:p=a("prevBtnText")||"&larr; Previous",progressText:u=a("progressText")||"{current} of {total}"}=t.popover||{};n.nextButton.innerHTML=s,n.previousButton.innerHTML=p,n.progress.innerHTML=u,l?(n.title.innerHTML=l,n.title.style.display="block"):n.title.style.display="none",m?(n.description.innerHTML=m,n.description.style.display="block"):n.description.style.display="none";const w=h||a("showButtons"),g=c||a("showProgress")||!1,f=(w==null?void 0:w.includes("next"))||(w==null?void 0:w.includes("previous"))||g;n.closeButton.style.display=w.includes("close")?"block":"none",f?(n.footer.style.display="flex",n.progress.style.display=g?"block":"none",n.nextButton.style.display=w.includes("next")?"block":"none",n.previousButton.style.display=w.includes("previous")?"block":"none"):n.footer.style.display="none";const v=r||a("disableButtons")||[];v!=null&&v.includes("next")&&(n.nextButton.disabled=!0,n.nextButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("previous")&&(n.previousButton.disabled=!0,n.previousButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("close")&&(n.closeButton.disabled=!0,n.closeButton.classList.add("driver-popover-btn-disabled"));const y=n.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description");const $=n.arrow;$.className="driver-popover-arrow";const S=((o=t.popover)==null?void 0:o.popoverClass)||a("popoverClass")||"";y.className=`driver-popover ${S}`.trim(),fe(n.wrapper,T=>{var R,x,L;const P=T.target,B=((R=t.popover)==null?void 0:R.onNextClick)||a("onNextClick"),A=((x=t.popover)==null?void 0:x.onPrevClick)||a("onPrevClick"),D=((L=t.popover)==null?void 0:L.onCloseClick)||a("onCloseClick");if(P.classList.contains("driver-popover-next-btn"))return B?B(e,t,{config:a(),state:d()}):H("nextClick");if(P.classList.contains("driver-popover-prev-btn"))return A?A(e,t,{config:a(),state:d()}):H("prevClick");if(P.classList.contains("driver-popover-close-btn"))return D?D(e,t,{config:a(),state:d()}):H("closeClick")},T=>!(n!=null&&n.description.contains(T))&&!(n!=null&&n.title.contains(T))&&typeof T.className=="string"&&T.className.includes("driver-popover")),E("popover",n);const b=((i=t.popover)==null?void 0:i.onPopoverRender)||a("onPopoverRender");b&&b(n,{config:a(),state:d()}),ge(e,t),ce(y);const _=e.classList.contains("driver-dummy-element"),k=pe([y,..._?[]:[e]]);k.length>0&&k[0].focus()}function we(){const e=d("popover");if(!(e!=null&&e.wrapper))return;const t=e.wrapper.getBoundingClientRect(),o=a("stagePadding")||0,i=a("popoverOffset")||0;return{width:t.width+o+i,height:t.height+o+i,realWidth:t.width,realHeight:t.height}}function le(e,t){const{elementDimensions:o,popoverDimensions:i,popoverPadding:n,popoverArrowDimensions:l}=t;return e==="start"?Math.max(Math.min(o.top-n,window.innerHeight-i.realHeight-l.width),l.width):e==="end"?Math.max(Math.min(o.top-(i==null?void 0:i.realHeight)+o.height+n,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):e==="center"?Math.max(Math.min(o.top+o.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):0}function de(e,t){const{elementDimensions:o,popoverDimensions:i,popoverPadding:n,popoverArrowDimensions:l}=t;return e==="start"?Math.max(Math.min(o.left-n,window.innerWidth-i.realWidth-l.width),l.width):e==="end"?Math.max(Math.min(o.left-(i==null?void 0:i.realWidth)+o.width+n,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):e==="center"?Math.max(Math.min(o.left+o.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):0}function ge(e,t){const o=d("popover");if(!o)return;const{align:i="start",side:n="left"}=(t==null?void 0:t.popover)||{},l=i,m=e.id==="driver-dummy-element"?"over":n,h=a("stagePadding")||0,r=we(),c=o.arrow.getBoundingClientRect(),s=e.getBoundingClientRect(),p=s.top-r.height;let u=p>=0;const w=window.innerHeight-(s.bottom+r.height);let g=w>=0;const f=s.left-r.width;let v=f>=0;const y=window.innerWidth-(s.right+r.width);let $=y>=0;const S=!u&&!g&&!v&&!$;let b=m;if(m==="top"&&u?$=v=g=!1:m==="bottom"&&g?$=v=u=!1:m==="left"&&v?$=u=g=!1:m==="right"&&$&&(v=u=g=!1),m==="over"){const _=window.innerWidth/2-r.realWidth/2,k=window.innerHeight/2-r.realHeight/2;o.wrapper.style.left=`${_}px`,o.wrapper.style.right="auto",o.wrapper.style.top=`${k}px`,o.wrapper.style.bottom="auto"}else if(S){const _=window.innerWidth/2-(r==null?void 0:r.realWidth)/2,k=10;o.wrapper.style.left=`${_}px`,o.wrapper.style.right="auto",o.wrapper.style.bottom=`${k}px`,o.wrapper.style.top="auto"}else if(v){const _=Math.min(f,window.innerWidth-(r==null?void 0:r.realWidth)-c.width),k=le(l,{elementDimensions:s,popoverDimensions:r,popoverPadding:h,popoverArrowDimensions:c});o.wrapper.style.left=`${_}px`,o.wrapper.style.top=`${k}px`,o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",b="left"}else if($){const _=Math.min(y,window.innerWidth-(r==null?void 0:r.realWidth)-c.width),k=le(l,{elementDimensions:s,popoverDimensions:r,popoverPadding:h,popoverArrowDimensions:c});o.wrapper.style.right=`${_}px`,o.wrapper.style.top=`${k}px`,o.wrapper.style.bottom="auto",o.wrapper.style.left="auto",b="right"}else if(u){const _=Math.min(p,window.innerHeight-r.realHeight-c.width);let k=de(l,{elementDimensions:s,popoverDimensions:r,popoverPadding:h,popoverArrowDimensions:c});o.wrapper.style.top=`${_}px`,o.wrapper.style.left=`${k}px`,o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",b="top"}else if(g){const _=Math.min(w,window.innerHeight-(r==null?void 0:r.realHeight)-c.width);let k=de(l,{elementDimensions:s,popoverDimensions:r,popoverPadding:h,popoverArrowDimensions:c});o.wrapper.style.left=`${k}px`,o.wrapper.style.bottom=`${_}px`,o.wrapper.style.top="auto",o.wrapper.style.right="auto",b="bottom"}S?o.arrow.classList.add("driver-popover-arrow-none"):ct(l,b,e)}function ct(e,t,o){const i=d("popover");if(!i)return;const n=o.getBoundingClientRect(),l=we(),m=i.arrow,h=l.width,r=window.innerWidth,c=n.width,s=n.left,p=l.height,u=window.innerHeight,w=n.top,g=n.height;m.className="driver-popover-arrow";let f=t,v=e;t==="top"?(s+c<=0?(f="right",v="end"):s+c-h<=0&&(f="top",v="start"),s>=r?(f="left",v="end"):s+h>=r&&(f="top",v="end")):t==="bottom"?(s+c<=0?(f="right",v="start"):s+c-h<=0&&(f="bottom",v="start"),s>=r?(f="left",v="start"):s+h>=r&&(f="bottom",v="end")):t==="left"?(w+g<=0?(f="bottom",v="end"):w+g-p<=0&&(f="left",v="start"),w>=u?(f="top",v="end"):w+p>=u&&(f="left",v="end")):t==="right"&&(w+g<=0?(f="bottom",v="start"):w+g-p<=0&&(f="right",v="start"),w>=u?(f="top",v="start"):w+p>=u&&(f="right",v="end")),f?(m.classList.add(`driver-popover-arrow-side-${f}`),m.classList.add(`driver-popover-arrow-align-${v}`)):m.classList.add("driver-popover-arrow-none")}function ut(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const o=document.createElement("header");o.id="driver-popover-title",o.classList.add("driver-popover-title"),o.style.display="none",o.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const n=document.createElement("button");n.type="button",n.classList.add("driver-popover-close-btn"),n.setAttribute("aria-label","Close"),n.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const m=document.createElement("span");m.classList.add("driver-popover-progress-text"),m.innerText="";const h=document.createElement("span");h.classList.add("driver-popover-navigation-btns");const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-prev-btn"),r.innerHTML="&larr; Previous";const c=document.createElement("button");return c.type="button",c.classList.add("driver-popover-next-btn"),c.innerHTML="Next &rarr;",h.appendChild(r),h.appendChild(c),l.appendChild(m),l.appendChild(h),e.appendChild(n),e.appendChild(t),e.appendChild(o),e.appendChild(i),e.appendChild(l),{wrapper:e,arrow:t,title:o,description:i,footer:l,previousButton:r,nextButton:c,closeButton:n,footerButtons:h,progress:m}}function vt(){var e;const t=d("popover");t&&((e=t.wrapper.parentElement)==null||e.removeChild(t.wrapper))}function mt(e={}){J(e);function t(){a("allowClose")&&c()}function o(){const s=d("activeIndex"),p=a("steps")||[];if(typeof s=="undefined")return;const u=s+1;p[u]?r(u):c()}function i(){const s=d("activeIndex"),p=a("steps")||[];if(typeof s=="undefined")return;const u=s-1;p[u]?r(u):c()}function n(s){(a("steps")||[])[s]?r(s):c()}function l(){var s;if(d("__transitionCallback"))return;const p=d("activeIndex"),u=d("__activeStep"),w=d("__activeElement");if(typeof p=="undefined"||typeof u=="undefined"||typeof d("activeIndex")=="undefined")return;const g=((s=u.popover)==null?void 0:s.onPrevClick)||a("onPrevClick");if(g)return g(w,u,{config:a(),state:d()});i()}function m(){var s;if(d("__transitionCallback"))return;const p=d("activeIndex"),u=d("__activeStep"),w=d("__activeElement");if(typeof p=="undefined"||typeof u=="undefined")return;const g=((s=u.popover)==null?void 0:s.onNextClick)||a("onNextClick");if(g)return g(w,u,{config:a(),state:d()});o()}function h(){d("isInitialized")||(E("isInitialized",!0),document.body.classList.add("driver-active",a("animate")?"driver-fade":"driver-simple"),lt(),K("overlayClick",t),K("escapePress",t),K("arrowLeftPress",l),K("arrowRightPress",m))}function r(s=0){var p,u,w,g,f,v,y,$;const S=a("steps");if(!S){console.error("No steps to drive through"),c();return}if(!S[s]){c();return}E("__activeOnDestroyed",document.activeElement),E("activeIndex",s);const b=S[s],_=S[s+1],k=S[s-1],T=((p=b.popover)==null?void 0:p.doneBtnText)||a("doneBtnText")||"Done",R=a("allowClose"),x=typeof((u=b.popover)==null?void 0:u.showProgress)!="undefined"?(w=b.popover)==null?void 0:w.showProgress:a("showProgress"),L=(((g=b.popover)==null?void 0:g.progressText)||a("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${s+1}`).replace("{{total}}",`${S.length}`),P=((f=b.popover)==null?void 0:f.showButtons)||a("showButtons"),B=["next","previous",...R?["close"]:[]].filter(be=>!(P!=null&&P.length)||P.includes(be)),A=((v=b.popover)==null?void 0:v.onNextClick)||a("onNextClick"),D=((y=b.popover)==null?void 0:y.onPrevClick)||a("onPrevClick"),ye=(($=b.popover)==null?void 0:$.onCloseClick)||a("onCloseClick");se(O(M({},b),{popover:M({showButtons:B,nextBtnText:_?void 0:T,disableButtons:[...k?[]:["previous"]],showProgress:x,progressText:L,onNextClick:A||(()=>{_?r(s+1):c()}),onPrevClick:D||(()=>{r(s-1)}),onCloseClick:ye||(()=>{c()})},(b==null?void 0:b.popover)||{})}))}function c(s=!0){const p=d("__activeElement"),u=d("__activeStep"),w=d("__activeOnDestroyed"),g=a("onDestroyStarted");if(s&&g){const y=!p||(p==null?void 0:p.id)==="driver-dummy-element";g(y?void 0:p,u,{config:a(),state:d()});return}const f=(u==null?void 0:u.onDeselected)||a("onDeselected"),v=a("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),dt(),vt(),st(),ot(),Je(),re(),p&&u){const y=p.id==="driver-dummy-element";f&&f(y?void 0:p,u,{config:a(),state:d()}),v&&v(y?void 0:p,u,{config:a(),state:d()})}w&&w.focus()}return{isActive:()=>d("isInitialized")||!1,refresh:G,drive:(s=0)=>{h(),r(s)},setConfig:J,setSteps:s=>{re(),J(O(M({},a()),{steps:s}))},getConfig:a,getState:d,getActiveIndex:()=>d("activeIndex"),isFirstStep:()=>d("activeIndex")===0,isLastStep:()=>{const s=a("steps")||[],p=d("activeIndex");return p!==void 0&&p===s.length-1},getActiveStep:()=>d("activeStep"),getActiveElement:()=>d("activeElement"),getPreviousElement:()=>d("previousElement"),getPreviousStep:()=>d("previousStep"),moveNext:o,movePrevious:i,moveTo:n,hasNextStep:()=>{const s=a("steps")||[],p=d("activeIndex");return p!==void 0&&s[p+1]},hasPreviousStep:()=>{const s=a("steps")||[],p=d("activeIndex");return p!==void 0&&s[p-1]},highlight:s=>{h(),se(O(M({},s),{popover:s.popover?M({showButtons:[],showProgress:!1,progressText:""},s.popover):void 0}))},destroy:()=>{c(!1)}}}const Gt=ze({name:"Gen",__name:"index",setup(e){const[t,{openDrawer:o}]=We(),i=Se("__read_how_to_gen",!1);Ye(()=>N(this,null,function*(){const x=yield Me(),L=[{label:"全部",value:""}],P=x.map(B=>({label:B,value:B}));L.push(...P),yield r().updateSchema({field:"dataName",componentProps:{options:L}}),!i.value&&setTimeout(()=>{const B={nextBtnText:"下一步",prevBtnText:"上一步"};mt({showProgress:!0,allowClose:!1,steps:[{element:"#how-to-edit",popover:M({title:"提示",description:"(1)如何生成写在这了!"},B)},{element:"#how-to-edit",popover:M({title:"提示",description:"(2)如何生成写在这了!"},B)},{element:"#how-to-edit",popover:O(M({title:"提示",description:"(3)如何生成写在这了!"},B),{nextBtnText:"知道了"})}]}).drive(),i.value=!0},1e3)}));const[n,{reload:l,getSelectRowKeys:m,clearSelectedRowKeys:h,getForm:r,selected:c,multipleRemove:s}]=Le({rowSelection:{type:"checkbox"},title:"已导入的表",clickToRowSelect:!0,api:Ae,rowKey:"tableId",useSearchForm:!0,formConfig:{schemas:Ke,baseColProps:{xs:24,sm:24,md:24,lg:6},fieldMapToTime:[["createTime",["params[beginTime]","params[endTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},columns:Ve,actionColumn:{width:500,title:"操作",key:"action",fixed:"right"}}),[p,{openModal:u}]=oe();function w(){u(!0,{})}const[g,f]=Te({tip:"加载中..."});function v(){return N(this,null,function*(){try{g();const x=m().join(","),L=yield ie(x),P=new Date().getTime();te(L,"批量代码生成-"+P+".zip")}finally{f()}})}function y(x){return N(this,null,function*(){try{g();const L=yield ie(x.tableId),P=new Date().getTime();te(L,"代码生成-"+P+".zip")}finally{f()}})}const $=De();function S(x){$(`/tool/generate/edit/${x.tableId}`)}function b(x){return N(this,null,function*(){yield Ie(x.tableId),h(),yield l()})}const[_,{openModal:k}]=oe();function T(x){k(!0,x.tableId)}function R(x){return N(this,null,function*(){yield ne([x.tableId]),yield l()})}return(x,L)=>{const P=Fe("a-button"),B=qe("auth");return Y(),F(C(Ee),{title:"代码生成",dense:""},{tags:I(()=>[W(C(Oe),{color:"orange"},{default:I(()=>[q("beta版本")]),_:1})]),default:I(()=>[W(C($e),{onRegister:C(n)},{toolbar:I(()=>[W(P,{id:"how-to-edit",class:"font-bold",type:"link",onClick:L[0]||(L[0]=A=>C(o)(!0))},{default:I(()=>[q("👉如何修改后端? ")]),_:1}),Z((Y(),F(P,{type:"primary",danger:"",onClick:L[1]||(L[1]=A=>C(s)(C(ne))),disabled:!C(c)},{default:I(()=>[q("删除")]),_:1},8,["disabled"])),[[B,"tool:gen:remove"]]),Z((Y(),F(P,{type:"primary",color:"success",disabled:!C(c),onClick:v},{default:I(()=>[q("生成")]),_:1},8,["disabled"])),[[B,"tool:gen:code"]]),Z((Y(),F(P,{type:"primary",onClick:w},{default:I(()=>[q("导入")]),_:1})),[[B,"tool:gen:import"]])]),bodyCell:I(({column:A,record:D})=>[A.key==="action"?(Y(),F(C(Be),{key:0,stopButtonPropagation:"",actions:[{label:"预览",icon:C(z).PREVIEW,auth:"tool:gen:preview",onClick:T.bind(null,D)},{label:"编辑",icon:C(z).EDIT,auth:"tool:gen:edit",onClick:S.bind(null,D)},{label:"同步",icon:C(z).SYNC,auth:"tool:gen:edit",popConfirm:{title:`确认要强制同步[${D.tableName}]表结构吗？`,placement:"left",confirm:b.bind(null,D)}},{label:"生成代码",icon:C(z).DOWNLOAD,auth:"tool:gen:code",onClick:y.bind(null,D)},{label:"删除",icon:C(z).DELETE,danger:!0,auth:"tool:gen:remove",popConfirm:{placement:"left",title:`是否删除表[${D.tableName}]?`,confirm:R.bind(null,D)}}]},null,8,["actions"])):Ge("",!0)]),_:1},8,["onRegister"]),W(He,{onRegister:C(p),onReload:C(l)},null,8,["onRegister","onReload"]),W(Re,{onRegister:C(_)},null,8,["onRegister"]),W(Ne,{onRegister:C(t)},null,8,["onRegister"])]),_:1})}}});export{Gt as default};
