var v=(x,_,i)=>new Promise((r,p)=>{var y=t=>{try{s(i.next(t))}catch(m){p(m)}},h=t=>{try{s(i.throw(t))}catch(m){p(m)}},s=t=>t.done?r(t.value):Promise.resolve(t.value).then(y,h);s((i=i.apply(x,_)).next())});import{P}from"./index-C4nZBquz.js";import{u as T,_ as V}from"./useTable-CNbfTOCZ.js";import{_ as S}from"./index-DCvxWw7W.js";import{T as B}from"./TableSwitch-Dq-a_0E1.js";import{d as I,f as K,e as N,g as E,h as L,i as U}from"./client.data-BQcrvcFU.js";import{b as A}from"./download-DOz9ltI1.js";import{i as F,aR as G,I as R}from"./entry/index-BbJQUQ84-1718268303552.js";import{_ as W}from"./ClientDrawer.vue_vue_type_script_setup_true_lang-DRt3BOag.js";import{u as Z}from"./index-BLDmWVyR.js";import{aa as j}from"./antd-DMGzOvrA.js";import{d as q,a7 as z,n as H,Z as n,a8 as l,a9 as a,k as f,u as e,m as C,_ as J,G as w,ab as D}from"./vue-Cw15aJ-2.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./index-BIkrAlj7.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./dictEnum-DeC8h6ZR.js";import"./dict-vVDMuEaq.js";import"./useRender-D1Q3fAQ3.js";import"./index-Dx0uas1b.js";import"./useLoading-D1in2ACg.js";import"./useSize-CUNtmCvH.js";const M={class:"<sm:hidden"},$e=q({name:"Client",__name:"index",setup(x){const{hasPermission:_}=F(),[i,{reload:r,multipleRemove:p,selected:y}]=T({rowSelection:{type:"checkbox"},api:I,title:"客户端列表",showIndexColumn:!1,rowKey:"id",useSearchForm:!0,formConfig:{schemas:K,name:"client",baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:N,actionColumn:{width:200,title:"操作",key:"action",fixed:"right"}}),[h,{openDrawer:s}]=Z();function t(d){s(!0,{record:d,update:!0})}function m(){s(!0,{update:!1})}function $(d){return v(this,null,function*(){yield U([d.id]),yield r()})}return(d,u)=>{const k=z("a-button"),b=H("auth");return n(),l(e(P),{dense:""},{default:a(()=>[f(e(V),{onRegister:e(i)},{toolbar:a(()=>[f(e(j),null,{default:a(()=>[C((n(),J("div",M,[f(e(G),{placement:"left",title:"确认导出表格吗?",onConfirm:u[0]||(u[0]=c=>e(A)(e(E),"客户端信息"))},{default:a(()=>[w("导出")]),_:1})])),[[b,"system:user:export"]]),C((n(),l(k,{class:"<sm:hidden",type:"primary",danger:"",disabled:!e(y),onClick:u[1]||(u[1]=c=>e(p)(e(E)))},{default:a(()=>[w("删除")]),_:1},8,["disabled"])),[[b,"system:client:remove"]]),C((n(),l(k,{type:"primary",onClick:m},{default:a(()=>[w("新增")]),_:1})),[[b,"system:client:add"]])]),_:1})]),bodyCell:a(({column:c,record:o})=>[c.dataIndex==="status"?(n(),l(e(B),{key:0,modelValue:o.status,"onUpdate:modelValue":g=>o.status=g,disabled:o.id===1||!e(_)("system:client:edit"),api:()=>e(L)(o),"custom-content":g=>`确认${g}客户端[${o.clientKey}]吗?`,reload:e(r)},null,8,["modelValue","onUpdate:modelValue","disabled","api","custom-content","reload"])):D("",!0),c.key==="action"?(n(),l(e(S),{key:1,stopButtonPropagation:"",actions:[{label:"修改",icon:e(R).EDIT,type:"primary",ghost:!0,auth:"system:client:edit",onClick:t.bind(null,o)},{label:"删除",icon:e(R).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:client:remove",popConfirm:{placement:"left",title:`是否删除客户端[${o.clientKey}]?`,confirm:$.bind(null,o)}}]},null,8,["actions"])):D("",!0)]),_:1},8,["onRegister"]),f(W,{onRegister:e(h),onReload:e(r)},null,8,["onRegister","onReload"])]),_:1})}}});export{$e as default};
