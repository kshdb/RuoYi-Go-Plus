var k=(b,f,l)=>new Promise((p,m)=>{var g=n=>{try{_(l.next(n))}catch(e){m(e)}},h=n=>{try{_(l.throw(n))}catch(e){m(e)}},_=n=>n.done?p(n.value):Promise.resolve(n.value).then(g,h);_((l=l.apply(b,f)).next())});import{d as F,f as B,o as S,a7 as V,Z as t,_ as c,k as d,a9 as i,a8 as v,F as D,aa as L,u as o,$ as s,a0 as u,G as w,ab as r,m as A,A as q}from"./vue-Cw15aJ-2.js";import{g as I}from"./index-m3nShAF-.js";import{d as R}from"./download-DOz9ltI1.js";import{o as $}from"./index-Dwl0vFWZ.js";import{C as N}from"./entry/index-BbJQUQ84-1718268303552.js";import{u as j}from"./useLoading-D1in2ACg.js";import{B as z}from"./index-BQijfeh-.js";import{b3 as E,U as G,A as H,aq as M,b4 as O,y as K}from"./antd-DMGzOvrA.js";const U=[{label:"撤销",value:"cancel",color:"warning"},{label:"通过",value:"pass",color:"green"},{label:"待审核",value:"waiting",color:"processing"},{label:"作废",value:"invalid",color:"black"},{label:"退回",value:"back",color:"warning"},{label:"终止",value:"termination",color:"error"},{label:"转办",value:"transfer",color:"blue"},{label:"委托",value:"pending",color:"blue"},{label:"加签",value:"copy",color:"success"},{label:"减签",value:"sign_off",color:"orange"}],Z={key:0,class:"flex flex-col gap-16px mt-16px"},J={class:"flex flex-row mb-3"},P={class:"font-bold"},Q={class:"flex flex-row justify-between"},W={id:"left",class:"flex gap-2 items-center"},X={class:"flex flex-col gap-5px"},Y={id:"right"},ee={key:0,class:"text-gray-500"},ae={key:1,class:"text-gray-500"},te={key:0,class:"py-5px"},oe={key:1,class:"flex flex-row items-center"},se=s("div",null,"附件: ",-1),le=s("div",{class:"mb-2"},null,-1),me=F({__name:"index",props:{businessKey:{type:String,required:!0}},setup(b){const f=b,l=B(!0),p=B([]);S(()=>k(this,null,function*(){const e=yield I(f.businessKey);p.value=e,l.value=!1}));function m(e){return U.find(y=>y.value===e.status)}function g(e){return e?e.length<=2?e:e.substring(e.length-2):""}const[h,_]=j({tip:"下载文件中..."});function n(e){return k(this,null,function*(){try{h();const y=yield $(e.contentId);R(y,e.name)}finally{_()}})}return(e,y)=>{const T=V("a-button");return f.businessKey?(t(),c("div",Z,[d(o(N),{title:"审批记录"},{default:i(()=>[p.value.length?(t(),v(o(O),{key:0,class:"pt-8px px-16px"},{default:i(()=>[(t(!0),c(D,null,L(p.value,a=>(t(),v(o(E),{key:a.id,color:"blue"},{default:i(()=>{var C;return[s("div",J,[s("span",P,u(a.name),1)]),s("div",Q,[s("div",W,[d(o(G),{size:40,style:{"background-color":"#fde3cf",color:"#f56a00"}},{default:i(()=>[w(u(g(a.nickName)),1)]),_:2},1024),s("div",X,[s("span",null,u(a.nickName),1),s("div",null,[d(o(H),{color:(C=m(a))==null?void 0:C.color},{default:i(()=>[w(u(a.statusName),1)]),_:2},1032,["color"])])])]),s("div",Y,[a.endTime?(t(),c("div",ee,"完成: "+u(a.endTime),1)):r("",!0),a.runDuration?(t(),c("div",ae,"耗时: "+u(a.runDuration),1)):r("",!0)])]),a.comment?(t(),c("div",te,[d(o(M),{message:a.comment,type:"info"},null,8,["message"])])):r("",!0),a.attachmentList?(t(),c("div",oe,[se,(t(!0),c(D,null,L(a.attachmentList,x=>(t(),v(T,{type:"link",key:x.id,onClick:ne=>n(x)},{default:i(()=>[w(u(x.name),1)]),_:2},1032,["onClick"]))),128))])):r("",!0),le]}),_:2},1024))),128))]),_:1})):r("",!0),A(d(o(K),{active:""},null,512),[[q,l.value]])]),_:1}),d(o(N),{title:"流程图"},{default:i(()=>[l.value?(t(),v(o(K),{key:0,active:""})):r("",!0),l.value?r("",!0):(t(),v(o(z),{key:1,businessKey:f.businessKey},null,8,["businessKey"]))]),_:1})])):r("",!0)}}});export{me as _};
