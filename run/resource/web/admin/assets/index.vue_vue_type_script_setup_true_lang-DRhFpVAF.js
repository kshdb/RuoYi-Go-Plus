var w=(h,f,n)=>new Promise((_,v)=>{var x=l=>{try{p(n.next(l))}catch(e){v(e)}},g=l=>{try{p(n.throw(l))}catch(e){v(e)}},p=l=>l.done?_(l.value):Promise.resolve(l.value).then(x,g);p((n=n.apply(h,f)).next())});import{d as F,f as I,o as S,aa as V,_ as a,$ as i,k as u,a9 as c,a8 as m,F as B,ab as D,u as s,a0 as o,a1 as d,G as b,ac as r,m as A,A as $}from"./vue-Bw3NQgLF.js";import{g as O}from"./index-CU-vYa55.js";import{d as R}from"./download-CYeVxFqw.js";import{o as j}from"./index-JVPtXpd4.js";import{C as L}from"./entry/index-CMepwc5X-1716790511191.js";import{u as q}from"./useLoading-iCq4GOHr.js";import{n as z}from"./common-BAk3Wc0g.js";import{B as E}from"./index-Cvdu3VMw.js";import{a0 as G,U as H,O as M,a1 as U,$ as J,y as N}from"./antd-BRjMhd0C.js";const K={key:0,class:"flex flex-col gap-16px mt-16px"},P={class:"flex flex-row mb-3"},Q={class:"font-bold"},W={class:"flex flex-row justify-between"},X={id:"left",class:"flex gap-2 items-center"},Y={class:"flex flex-col gap-5px"},Z={id:"right"},ee={key:0,class:"text-gray-500"},te={key:1,class:"text-gray-500"},ae={key:0,class:"py-5px"},se={key:1,class:"flex flex-row items-center"},oe=o("div",null,"附件: ",-1),ne=o("div",{class:"mb-2"},null,-1),ye=F({__name:"index",props:{instanceId:{type:String,required:!0}},setup(h){const f=h,n=I(!0),_=I([]);S(()=>w(this,null,function*(){const e=yield O(f.instanceId);_.value=e,n.value=!1}));function v(e){return z.find(y=>y.value===e.status)}function x(e){return e?e.length<=2?e:e.substring(e.length-2):""}const[g,p]=q({tip:"下载文件中..."});function l(e){return w(this,null,function*(){try{g();const y=yield j(e.contentId);R(y,e.name)}finally{p()}})}return(e,y)=>{const T=V("a-button");return f.instanceId?(a(),i("div",K,[u(s(L),{title:"审批记录"},{default:c(()=>[_.value.length?(a(),m(s(J),{key:0,class:"pt-8px px-16px"},{default:c(()=>[(a(!0),i(B,null,D(_.value,t=>(a(),m(s(G),{key:t.id,color:"blue"},{default:c(()=>{var C;return[o("div",P,[o("span",Q,d(t.name),1)]),o("div",W,[o("div",X,[u(s(H),{size:40,style:{"background-color":"#fde3cf",color:"#f56a00"}},{default:c(()=>[b(d(x(t.nickName)),1)]),_:2},1024),o("div",Y,[o("span",null,d(t.nickName),1),o("div",null,[u(s(M),{color:(C=v(t))==null?void 0:C.color},{default:c(()=>[b(d(t.statusName),1)]),_:2},1032,["color"])])])]),o("div",Z,[t.endTime?(a(),i("div",ee,"完成: "+d(t.endTime),1)):r("",!0),t.runDuration?(a(),i("div",te,"耗时: "+d(t.runDuration),1)):r("",!0)])]),t.comment?(a(),i("div",ae,[u(s(U),{message:t.comment,type:"info"},null,8,["message"])])):r("",!0),t.attachmentList?(a(),i("div",se,[oe,(a(!0),i(B,null,D(t.attachmentList,k=>(a(),m(T,{type:"link",key:k.id,onClick:le=>l(k)},{default:c(()=>[b(d(k.name),1)]),_:2},1032,["onClick"]))),128))])):r("",!0),ne]}),_:2},1024))),128))]),_:1})):r("",!0),A(u(s(N),{active:""},null,512),[[$,n.value]])]),_:1}),u(s(L),{title:"流程图"},{default:c(()=>[n.value?(a(),m(s(N),{key:0,active:""})):r("",!0),n.value?r("",!0):(a(),m(s(E),{key:1,instanceId:f.instanceId},null,8,["instanceId"]))]),_:1})])):r("",!0)}}});export{ye as _};
