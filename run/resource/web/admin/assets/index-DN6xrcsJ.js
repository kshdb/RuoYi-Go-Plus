const __vite__fileDeps=["assets/TableImg-3Q3WLKES.js","assets/useTable-BlleqRm-.js","assets/vue-Bw3NQgLF.js","assets/useForm-uR1ZVBCA.js","assets/FormItem.vue_vue_type_script_lang-DAyz6oLf.js","assets/componentMap-DPcekmXH.js","assets/RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js","assets/antd-BRjMhd0C.js","assets/entry/index-CMepwc5X-1716790511191.js","assets/index-DJaEvxq6.css","assets/index-Rv_3g2e8.js","assets/index-CMSTH4sS.js","assets/useWindowSizeFn-Ba6K9eqp.js","assets/index-6AMYKi13.css","assets/useSortable-CwI952Jx.js","assets/download-CYeVxFqw.js","assets/useLoading-iCq4GOHr.js","assets/index-BZ-W08GR.css","assets/copyTextToClipboard-BLtSw0o7.js","assets/onMountedOrActivated-B2y-oH2N.js","assets/componentMap-DyEVosHV.css","assets/helper-CfJJkrf5.js","assets/BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js","assets/BasicForm-DoX39MN0.css","assets/sortable.esm-DFFrMEeC.js","assets/useTable-CnSPxVs-.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var v=(t,w,o)=>new Promise((b,f)=>{var _=e=>{try{c(o.next(e))}catch(m){f(m)}},k=e=>{try{c(o.throw(e))}catch(m){f(m)}},c=e=>e.done?b(e.value):Promise.resolve(e.value).then(_,k);c((o=o.apply(t,w)).next())});import{K as Q,c as X,I as R}from"./entry/index-CMepwc5X-1716790511191.js";import{P as Z}from"./index-DrfqwNLV.js";import{u as y,_ as T}from"./useTable-BlleqRm-.js";import{_ as M}from"./index-Rv_3g2e8.js";import{u as tt}from"./useLoading-iCq4GOHr.js";import{a as at,b as L,o as ot}from"./index-JVPtXpd4.js";import{h as et}from"./index-fDNDlwjn.js";import{d as nt}from"./download-CYeVxFqw.js";import{u as st}from"./useRender-C6p2srTi.js";import S from"./FileUpload-CONu64Wh.js";import{c as it}from"./createAsyncComponent-vQ6eTu1D.js";import{ad as lt,T as j,a9 as rt}from"./antd-BRjMhd0C.js";import{d as pt,f as dt,r as N,o as ct,aa as mt,n as ut,_ as r,a8 as p,a9 as s,k as d,u as a,m as h,G as C,ad as z,$ as ft,F as gt,a1 as xt,ac as B}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./index-CMSTH4sS.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./index-BhefpKLc.js";import"./dict-C9gNHjAh.js";const{renderTooltip:D}=st(),vt=[{title:"文件名",dataIndex:"fileName",ellipsis:!0,customRender({value:t}){return D(t)}},{title:"文件原名",dataIndex:"originalName",ellipsis:!0,customRender({value:t}){return D(t)}},{title:"文件拓展名",dataIndex:"fileSuffix"},{title:"文件预览",dataIndex:"url",ellipsis:!0,customRender({value:t}){return D(t)}},{title:"创建时间",dataIndex:"createTime",sorter:!0},{title:"上传人",dataIndex:"createByName"},{title:"服务商",dataIndex:"service"}],ht=[{label:"文件名",field:"fileName",component:"Input"},{label:"原名",field:"originalName",component:"Input"},{label:"拓展名",field:"fileSuffix",component:"Input"},{label:"服务商",field:"service",component:"Input"},{label:"创建时间",field:"createTime",component:"RangePicker"}];var P=(t=>(t.threegp="video/3gpp",t.apk="application/vnd.android.package-archive",t.asf="video/x-ms-asf",t.avi="video/x-msvideo",t.bin="application/octet-stream",t.bmp="image/bmp",t.c="text/plain",t.class_="application/octet-stream",t.conf="text/plain",t.cpp="text/plain",t.doc="application/msword",t.docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",t.xls="application/vnd.ms-excel",t.xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.exe="application/octet-stream",t.gif="image/gif",t.gtar="application/x-gtar",t.gz="application/x-gzip",t.h="text/plain",t.htm="text/html",t.html="text/html",t.jar="application/java-archive",t.java="text/plain",t.jpeg="image/jpeg",t.jpg="image/jpeg",t.js="application/x-javascript",t.log="text/plain",t.m3u="audio/x-mpegurl",t.m4a="audio/mp4a-latm",t.m4b="audio/mp4a-latm",t.m4p="audio/mp4a-latm",t.m4u="video/vnd.mpegurl",t.m4v="video/x-m4v",t.mov="video/quicktime",t.mp2="audio/x-mpeg",t.mp3="audio/x-mpeg",t.mp4="video/mp4",t.mpc="application/vnd.mpohun.certificate",t.mpe="video/mpeg",t.mpeg="video/mpeg",t.mpg="video/mpeg",t.mpg4="video/mp4",t.mpga="audio/mpeg",t.msg="application/vnd.ms-outlook",t.ogg="audio/ogg",t.pdf="application/pdf",t.png="image/png",t.pps="application/vnd.ms-powerpoint",t.ppt="application/vnd.ms-powerpoint",t.pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",t.prop="text/plain",t.rc="text/plain",t.rmvb="audio/x-pn-realaudio",t.rtf="application/rtf",t.sh="text/plain",t.tar="application/x-tar",t.tgz="application/x-compressed",t.txt="text/plain",t.wav="audio/x-wav",t.wma="audio/x-ms-wma",t.wmv="audio/x-ms-wmv",t.wps="application/vnd.ms-works",t.xml="text/plain",t.z="application/x-compress",t.zip="application/x-zip-compressed",t))(P||{});const Qt=pt({name:"Oss",__name:"index",setup(t){const w=it(()=>Q(()=>import("./TableImg-3Q3WLKES.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]))),o=dt(!1),b=N({btnText:"上传图片",accept:["image/*"],maxSize:5}),{txt:f,doc:_,docx:k,xls:c,xlsx:e,ppt:m,pptx:Y,pdf:E,mp3:F}=P,A=N({btnText:"上传文件",accept:[f,_,k,c,e,m,Y,E,F],maxSize:10});function $(n){return["jpg","jpeg","png","gif","webp"].some(g=>n.toLocaleLowerCase().includes(g))}ct(()=>v(this,null,function*(){const n=yield et("sys.oss.previewListResource");o.value=!!n}));const[O,{reload:I,selected:V,multipleRemove:K}]=y({rowSelection:{type:"checkbox"},title:"文件列表",showIndexColumn:!1,api:at,rowKey:"ossId",useSearchForm:!0,formConfig:{schemas:ht,labelWidth:100,baseColProps:{xs:24,sm:24,md:24,lg:6},fieldMapToTime:[["createTime",["params[beginCreateTime]","params[endCreateTime]"],["YYYY-MM-DD 00:00:00","YYYY-MM-DD 23:59:59"]]]},columns:vt,actionColumn:{width:200,title:"操作",key:"action",fixed:"right"}}),[W,G]=tt({tip:"下载文件中..."});function U(n){return v(this,null,function*(){try{W();const i=yield ot(n.ossId);nt(i,n.originalName)}finally{G()}})}function q(n){return v(this,null,function*(){yield L([n.ossId]),yield I()})}const H=X();function J(){H("/system/oss-config/index")}return(n,i)=>{const g=mt("a-button"),x=ut("auth");return r(),p(a(Z),{dense:""},{default:s(()=>[d(a(T),{onRegister:a(O)},{toolbar:s(()=>[d(a(lt),null,{default:s(()=>[d(a(j),{title:"预览图片"},{default:s(()=>[d(a(rt),{checked:o.value,"onUpdate:checked":i[0]||(i[0]=u=>o.value=u)},null,8,["checked"])]),_:1}),h((r(),p(g,{onClick:J},{default:s(()=>[C("配置管理")]),_:1})),[[x,"system:ossConfig:list"]]),h((r(),p(g,{class:"<sm:hidden",type:"primary",danger:"",onClick:i[1]||(i[1]=u=>a(K)(a(L))),disabled:!a(V)},{default:s(()=>[C("删除")]),_:1},8,["disabled"])),[[x,"system:oss:remove"]]),h(d(S,z({class:"<sm:hidden"},A,{onReload:a(I)}),null,16,["onReload"]),[[x,"system:oss:upload"]]),h(d(S,z(b,{onReload:a(I)}),null,16,["onReload"]),[[x,"system:oss:upload"]])]),_:1})]),bodyCell:s(({column:u,record:l})=>[u.dataIndex==="url"?(r(),ft(gt,{key:0},[o.value&&$(l.url)?(r(),p(a(w),{key:0,imgList:[l.url],size:50,simpleShow:""},null,8,["imgList"])):(r(),p(a(j),{key:1,title:l.url},{default:s(()=>[C(xt(l.url),1)]),_:2},1032,["title"]))],64)):B("",!0),u.key==="action"?(r(),p(a(M),{key:1,stopButtonPropagation:"",actions:[{label:"下载",icon:a(R).DOWNLOAD,type:"primary",ghost:!0,auth:"system:oss:download",onClick:U.bind(null,l)},{label:"删除",icon:a(R).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:oss:remove",popConfirm:{placement:"left",title:`是否删除文件[${l.fileName}]?`,confirm:q.bind(null,l)}}]},null,8,["actions"])):B("",!0)]),_:1},8,["onRegister"])]),_:1})}}});export{Qt as default};
