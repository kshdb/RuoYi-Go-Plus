var v=(b,d,i)=>new Promise((r,u)=>{var f=e=>{try{a(i.next(e))}catch(m){u(m)}},c=e=>{try{a(i.throw(e))}catch(m){u(m)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(f,c);a((i=i.apply(b,d)).next())});import{P as $}from"./index-C4nZBquz.js";import{u as E,_ as P}from"./useTable-CNbfTOCZ.js";import{_ as S}from"./index-DCvxWw7W.js";import{T as B}from"./TableSwitch-Dq-a_0E1.js";import{o as x,a as K,b as N}from"./config-CMI3a6Xp.js";import{f as U,c as F}from"./oss.config.data-DZ71AQKq.js";import{i as L,I as D}from"./entry/index-BbJQUQ84-1718268303552.js";import{u as O}from"./index-BLDmWVyR.js";import{_ as W}from"./OssConfigDrawer.vue_vue_type_script_setup_true_lang-DgCF3Fib.js";import{d as A,a7 as G,n as Y,Z as l,a8 as p,a9 as n,k as y,G as h,m as R,u as o,ab as T}from"./vue-Cw15aJ-2.js";import"./useContentViewHeight-BDi3O9lC.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./antd-DMGzOvrA.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./index-BIkrAlj7.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";import"./useRender-D1Q3fAQ3.js";import"./index-Dx0uas1b.js";import"./dict-vVDMuEaq.js";import"./dictEnum-DeC8h6ZR.js";import"./useSize-CUNtmCvH.js";const Do=A({name:"OssConfig",__name:"OssConfig",setup(b){const{hasPermission:d}=L(),[i,{reload:r,multipleRemove:u,selected:f}]=E({rowSelection:{type:"checkbox"},title:"oss配置列表",showIndexColumn:!1,api:N,rowKey:"ossConfigId",useSearchForm:!0,beforeFetch:t=>(t.status&&(t.status=t.status==="Y"?0:1),t),formConfig:{schemas:U,labelWidth:80,name:"oss_config",baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:F,actionColumn:{width:160,title:"操作",key:"action",fixed:"right"}}),[c,{openDrawer:a}]=O();function e(t){a(!0,{record:t,update:!0})}function m(){a(!0,{update:!1})}function I(t){return v(this,null,function*(){yield x([t.ossConfigId]),yield r()})}function V(){window.open("https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/basic/oss")}return(t,w)=>{const g=G("a-button"),k=Y("auth");return l(),p(o($),{dense:""},{default:n(()=>[y(o(P),{onRegister:o(i)},{toolbar:n(()=>[y(g,{class:"font-bold",type:"link",onClick:V},{default:n(()=>[h("oss文档")]),_:1}),R((l(),p(g,{type:"primary",danger:"",onClick:w[0]||(w[0]=C=>o(u)(o(x))),disabled:!o(f)},{default:n(()=>[h("删除")]),_:1},8,["disabled"])),[[k,"system:ossConfig:remove"]]),R((l(),p(g,{type:"primary",onClick:m},{default:n(()=>[h("新增")]),_:1})),[[k,"system:ossConfig:add"]])]),bodyCell:n(({column:C,record:s})=>[C.dataIndex==="status"?(l(),p(o(B),{key:0,modelValue:s.status,"onUpdate:modelValue":_=>s.status=_,disabled:!o(d)("system:ossConfig:edit"),api:()=>o(K)(s),"custom-content":_=>`确定要[${_}][${s.configKey}]配置吗?`,reload:o(r)},null,8,["modelValue","onUpdate:modelValue","disabled","api","custom-content","reload"])):T("",!0),C.key==="action"?(l(),p(o(S),{key:1,stopButtonPropagation:"",actions:[{label:"修改",icon:o(D).EDIT,type:"primary",ghost:!0,auth:"system:ossConfig:edit",onClick:e.bind(null,s)},{label:"删除",icon:o(D).DELETE,type:"primary",danger:!0,ghost:!0,auth:"system:ossConfig:remove",popConfirm:{placement:"left",title:`是否删除oss配置[${s.configKey}]?`,confirm:I.bind(null,s)}}]},null,8,["actions"])):T("",!0)]),_:1},8,["onRegister"]),y(W,{onRegister:o(c),onReload:o(r)},null,8,["onRegister","onReload"])]),_:1})}}});export{Do as default};
