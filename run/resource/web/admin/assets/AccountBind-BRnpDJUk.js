var I=(t,_,i)=>new Promise((f,m)=>{var b=s=>{try{c(i.next(s))}catch(u){m(u)}},r=s=>{try{c(i.throw(s))}catch(u){m(u)}},c=s=>s.done?f(s.value):Promise.resolve(s.value).then(b,r);c((i=i.apply(t,_)).next())});import{aA as y,_ as L,aB as w,h as $,l as D}from"./entry/index-BbJQUQ84-1718268303552.js";import{_ as S,a as N,u as R}from"./useTable-CNbfTOCZ.js";import{_ as V}from"./index-DCvxWw7W.js";import{a as z}from"./common-8BH4CJGh.js";import{W as T,R as U,aq as M}from"./antd-DMGzOvrA.js";import{d as j,f as q,c as G,u as H,a7 as n,Z as h,_ as O,k as d,a9 as p,a8 as g,ab as A,$ as a,a0 as k,G as x,a2 as P,a3 as W}from"./vue-Cw15aJ-2.js";import"./useForm-BsovIqMX.js";import"./FormItem.vue_vue_type_script_lang-C67_1cA1.js";import"./componentMap-qA-f8iV4.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-SetVOuUZ.js";import"./copyTextToClipboard-uEEWQikS.js";import"./index-BIkrAlj7.js";import"./useWindowSizeFn-BKs0NEK5.js";import"./onMountedOrActivated-CSHfHTyc.js";import"./style-CLEvKZSv.js";import"./helper-CXVLNTBN.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-BTdBE9Oa.js";import"./download-DOz9ltI1.js";import"./useLoading-D1in2ACg.js";function Z(){return y.get({url:"/system/social/list"})}const J=j({components:{List:T,ListItem:T.Item,Icon:L,BasicTable:S,TableAction:V,TableImg:N,Card:U,Alert:M},setup(){const[t,{reload:_}]=R({columns:[{dataIndex:"source",title:"绑定平台"},{dataIndex:"avatar",title:"头像"},{dataIndex:"userName",title:"账号"}],title:"账号绑定",api:Z,pagination:!1,canResize:!1,showIndexColumn:!0,actionColumn:{key:"action",title:"操作"}}),{createConfirm:i,createMessage:f}=$();function m(e){f.info({content:`暂不支持绑定${e}`})}function b(e){i({title:"提示",iconType:"info",content:`是否解除绑定[${e.source}]平台的[${e.userName}]账号?`,onOk:()=>I(this,null,function*(){yield w(e.id),yield _()})})}const r=q([]),c=G(()=>{const e=[...z];return e.forEach(l=>{H(r).includes(l.source)?l.bound=!0:l.bound=!1}),e});function s(e){return e.bound?"已绑定":"绑定"}function u(e){r.value=e.items.map(l=>l.source.toLowerCase())}return{list:c,registerTable:t,handleAuthUnbinding:b,defaultTip:m,onFetchSuccess:u,buttonText:s}}}),v=t=>(P("data-v-a2da9322"),t=t(),W(),t),K={class:"p-2"},Q={class:"flex flex-row w-full items-center gap-4"},X={class:""},Y={class:"flex flex-row flex-1 items-center justify-between"},tt={class:"flex flex-col"},et={class:"text-14px text-black/88 dark:text-white/85 mb-4px"},ot={class:"text-black/45 dark:text-white/45"},st=v(()=>a("p",null,[x("需要添加第三方账号在 "),a("span",{class:"font-bold"}," /src/views/auth/common.ts"),x(" 中accountBindList按模板添加 ")],-1)),at=v(()=>a("p",null,[x("添加对应模板后会在此处显示绑定, 但只有"),a("span",{class:"font-bold"},"实现了action才能在登录页显示")],-1));function nt(t,_,i,f,m,b){const r=n("TableImg"),c=n("TableAction"),s=n("BasicTable"),u=n("Icon"),e=n("a-button"),l=n("Card"),F=n("ListItem"),C=n("List"),E=n("Alert");return h(),O("div",null,[d(s,{onRegister:t.registerTable,onFetchSuccess:t.onFetchSuccess},{bodyCell:p(({column:o,record:B})=>[o.key==="avatar"?(h(),g(r,{key:0,imgList:[B.avatar]},null,8,["imgList"])):A("",!0),o.key==="action"?(h(),g(c,{key:1,actions:[{label:"解绑账号",onClick:t.handleAuthUnbinding.bind(null,B)}]},null,8,["actions"])):A("",!0)]),_:1},8,["onRegister","onFetchSuccess"]),a("div",K,[d(C,{grid:{gutter:8,xs:1,sm:1,md:2,lg:3,xl:3,xxl:5},"data-source":t.list},{renderItem:p(({item:o})=>[d(F,null,{default:p(()=>[d(l,null,{default:p(()=>[a("div",Q,[a("div",X,[o.avatar?(h(),g(u,{key:0,size:40,icon:o.avatar,color:o.color},null,8,["icon","color"])):A("",!0)]),a("div",Y,[a("div",tt,[a("h4",et,k(o.title),1),a("span",ot,k(o.description),1)]),d(e,{disabled:o.bound,type:"link",size:"small",onClick:B=>o.action?o.action():t.defaultTip(o.title)},{default:p(()=>[x(k(t.buttonText(o)),1)]),_:2},1032,["disabled","onClick"])])])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),d(E,{message:"说明",type:"info"},{description:p(()=>[st,at]),_:1})])])}const Et=D(J,[["render",nt],["__scopeId","data-v-a2da9322"]]);export{Et as default};
