var u=(f,d,o)=>new Promise((i,c)=>{var m=e=>{try{a(o.next(e))}catch(n){c(n)}},p=e=>{try{a(o.throw(e))}catch(n){c(n)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(m,p);a((o=o.apply(f,d)).next())});import{a as C,B as D}from"./index-BLDmWVyR.js";import{u as v,_ as B}from"./useForm-BsovIqMX.js";import"./BasicForm.vue_vue_type_style_index_0_lang-B6-8R5aw.js";import"./componentMap-qA-f8iV4.js";import{c as F,m as P,a as k,b as I}from"./client.data-BQcrvcFU.js";import{u as R}from"./useSize-CUNtmCvH.js";import{d as S,f as x,c as W,Z as A,a8 as L,a9 as M,k as O,u as s,ac as T}from"./vue-Cw15aJ-2.js";const q=S({name:"ClientDrawer",__name:"ClientDrawer",emits:["register","reload"],setup(f,{emit:d}){const o=d,i=x(!1),c=R(700),m=W(()=>i.value?"编辑客户端":"新增客户端"),[p,{drawerLoading:a,closeDrawer:e}]=C(t=>u(this,null,function*(){a(!0);const{record:r,update:l}=t;if(i.value=l,yield g([{field:"clientId",show:l},{field:"clientKey",componentProps:{disabled:l}},{field:"clientSecret",componentProps:{disabled:l}},{field:"status",componentProps:{disabled:(r==null?void 0:r.id)===1}}]),l&&r){const b=yield F(r.id);yield h(b)}a(!1)})),[n,{setFieldsValue:h,resetForm:w,validate:_,updateSchema:g}]=v({layout:"vertical",labelWidth:180,name:"client_modal",showActionButtonGroup:!1,baseColProps:{span:24},schemas:P});function y(){return u(this,null,function*(){try{a(!0);const t=yield _();t.grantType=t.grantTypeList.join(","),s(i)?yield k(t):yield I(t),o("reload"),e(),yield w()}catch(t){}finally{a(!1)}})}return(t,r)=>(A(),L(s(D),T(t.$attrs,{title:m.value,width:s(c),showFooter:!0,onRegister:s(p),onOk:y,onClose:s(w)}),{default:M(()=>[O(s(B),{onRegister:s(n)},null,8,["onRegister"])]),_:1},16,["title","width","onRegister","onClose"]))}});export{q as _};
