var c=(e,o,r)=>new Promise((m,i)=>{var n=t=>{try{a(r.next(t))}catch(p){i(p)}},d=t=>{try{a(r.throw(t))}catch(p){i(p)}},a=t=>t.done?m(t.value):Promise.resolve(t.value).then(n,d);a((r=r.apply(e,o)).next())});import{P as g}from"./index-DrfqwNLV.js";import{u as I,_}from"./useTable-BlleqRm-.js";import{_ as x}from"./index-Rv_3g2e8.js";import{a as h,b}from"./index-BNY2tKBi.js";import{h as y}from"./entry/index-CMepwc5X-1716790511191.js";import{u as C}from"./useRender-C6p2srTi.js";import{d as k,_ as l,a8 as u,a9 as f,k as w,u as s,ac as N}from"./vue-Bw3NQgLF.js";import"./useContentViewHeight-xBSq9xFC.js";import"./useWindowSizeFn-Ba6K9eqp.js";import"./antd-BRjMhd0C.js";import"./onMountedOrActivated-B2y-oH2N.js";import"./useForm-uR1ZVBCA.js";import"./FormItem.vue_vue_type_script_lang-DAyz6oLf.js";import"./componentMap-DPcekmXH.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-DgvCFV63.js";import"./copyTextToClipboard-BLtSw0o7.js";import"./index-CMSTH4sS.js";import"./helper-CfJJkrf5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BxZ9HtKh.js";import"./sortable.esm-DFFrMEeC.js";import"./useSortable-CwI952Jx.js";import"./download-CYeVxFqw.js";import"./useLoading-iCq4GOHr.js";import"./index-BhefpKLc.js";import"./dict-C9gNHjAh.js";const{renderDateTime:R,renderBrowserIcon:P,renderOsIcon:T,renderTag:L}=C(),B=[{title:"登录平台",dataIndex:"deviceType",customRender({value:e}){return L(e,"blue")}},{title:"登录账号",dataIndex:"userName"},{title:"部门名称",dataIndex:"deptName"},{title:"IP地址",dataIndex:"ipaddr"},{title:"登录地址",dataIndex:"loginLocation"},{title:"浏览器",dataIndex:"browser",customRender({value:e}){return P(e,!0)}},{title:"系统",dataIndex:"os",customRender({value:e}){if(e){const o=e.split(" or ");o.length===2&&(e=o[0])}return T(e,!0)}},{title:"登录时间",dataIndex:"loginTime",customRender({value:e}){return R(e)}}],$=[{label:"IP地址",field:"ipaddr",component:"Input"},{label:"用户账号",field:"userName",component:"Input"}],ne=k({name:"Online",__name:"index",setup(e){const[o,{reload:r}]=I({title:"在线用户列表",showIndexColumn:!0,api:h,rowKey:"tokenId",useSearchForm:!0,formConfig:{schemas:$,baseColProps:{xs:24,sm:24,md:24,lg:6}},columns:B,actionColumn:{width:160,title:"操作",key:"action",fixed:"right"}}),{createMessage:m}=y();function i(n){return c(this,null,function*(){yield b(n.tokenId),yield r(),m.success(`退出用户账号[${n.userName}]成功`)})}return(n,d)=>(l(),u(s(g),{dense:""},{default:f(()=>[w(s(_),{onRegister:s(o)},{bodyCell:f(({column:a,record:t})=>[a.key==="action"?(l(),u(s(x),{key:0,stopButtonPropagation:"",actions:[{label:"强制退出",icon:"ic:outline-logout",type:"primary",danger:!0,auth:"monitor:online:forceLogout",ghost:!0,popConfirm:{placement:"left",title:`是否强制退出用户[${t.userName}]?`,confirm:i.bind(null,t)}}]},null,8,["actions"])):N("",!0)]),_:1},8,["onRegister"])]),_:1}))}});export{ne as default};
